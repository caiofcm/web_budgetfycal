!function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)}([function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(){gapi.load("client:auth2",s.initClient)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=(n.n(i),{inc:[{description:"Web dev Butcher Project ",value:500,date:"02-01-2018"},{description:"Backend Project for Spotify ",value:2500,date:"02-03-2018"},{description:"Sold U2 ticket ",value:500,date:"01-14-2018"},{description:"Salary ",value:8e3,date:"11-01-2017"},{description:"Freelance toptal VueJS for geolocation ",value:1245.2,date:"12-01-2017"}],exp:[{description:"Daycare",value:2200,date:"02-01-2018"},{description:"Clothes",value:200.21,date:"02-01-2018"},{description:"Bills",value:625,date:"02-01-2018"},{description:"Friday 13 Happy hour",value:125.7,date:"02-01-2018"}]}),l=function(){var e=function(e,t,n,a){this.id=e,this.description=t,this.value=n,this.percentage=-1,this.date=a};e.prototype.calcPercentages=function(e){this.percentage=e>0?Math.round(this.value/e*100):-1},e.prototype.getPercentage=function(){return this.percentage};var t=function(e,t,n,a){this.id=e,this.description=t,this.value=n,this.date=a},n={allItems:{exp:[],inc:[]},totals:{exp:0,inc:0},budget:0,percentage:-1},a=function(){n={allItems:{exp:[],inc:[]},totals:{exp:0,inc:0},budget:0,percentage:-1}},o=function(e){var t=0;n.allItems[e].forEach(function(e){t+=e.value}),n.totals[e]=t};return{addItem:function(a,o,i,r){var l,c;return c=n.allItems[a].length>0?n.allItems[a][n.allItems[a].length-1].id+1:0,"exp"===a?l=new e(c,o,i,r):"inc"===a&&(l=new t(c,o,i,r)),n.allItems[a].push(l),l},deleteItem:function(e,t){var a=n.allItems[e].findIndex(function(e,n){return e.id===t});null===a&&void 0===a||n.allItems[e].splice(a,1)},calculateBudget:function(){o("inc"),o("exp"),n.budget=n.totals.inc-n.totals.exp,n.totals.inc>0?n.percentage=Math.round(n.totals.exp/n.totals.inc*100):n.percentage=-1},calculatePercentages:function(){n.allItems.exp.forEach(function(e){e.calcPercentages(n.totals.inc)})},getPercentages:function(){return n.allItems.exp.map(function(e){return e.getPercentage()})},loadDataLocalStorage:function(e,t,n){try{t(JSON.parse(localStorage.getItem(e.key)))}catch(e){n(e)}},getBudget:function(){return{budget:n.budget,percentage:n.percentage,totalInc:n.totals.inc,totalExp:n.totals.exp}},resetInternalData:function(){a()},getAllDataItems:function(){return n.allItems},data2SimpleScheme:function(){return n.allItems},testing:function(){return n}}}(),c=function(){function e(e){var t=e.split(" "),n=t[0].trim()[0],a=t[1].split("."),o=parseFloat(a[0].split(",").join("")),i=parseFloat(a[1]),r=o+i/100;return"+"===n?r:-r}var t={inputType:".add__type",inputDescription:".add__description",inputValue:".add__value",inputBtn:".add__btn",incomeContainer:".income__list",expensesContainer:".expenses__list",budgetLabel:".budget__value",incomeLabel:".budget__income--value",expenseLabel:".budget__expenses--value",percentageLabel:".budget__expenses--percentage",listItems:".list-items",expensesPercentages:".item__percentage",dateLabel:".budget__title--month",loadBtn:".load__btn",saveBtn:".save__btn",chartDiv:".charts",item:".item",selectLocalStg:"#selectLocalStg",tabLoad:".tab-load",okLoadBtn:".ok-load-btn",loadTabCnt:"#tabLoadContent",localStorageTabContent:"load-local-stg",fileSysTabContent:"#load-file-sys",loadModal:"#loadModal",inputSaveKey:"#inputSaveKey",okSaveBtn:".ok-save-btn",tabSaveContent:"#tabSaveContent",saveLocalStgTabCnt:"save-local-stg",tabChart:"#tabChart",chartIncTab:"#chart-inc-tab",chartExpTab:"#chart-exp-tab",chartTimeTab:"#chart-time-tab",chartInc:"#chart-inc-content",chartTimed:"#chart-time-content",chartExp:"#chart-exp-content",saveModal:"#saveModal",datePicker:"#datepicker",calendarTabContent:"load-google-cal"},n={incTable:$("#inc-table"),expTable:$("#exp-table"),removeTableRowBtnInc:$("#removeBtn-table-inc"),removeTableRowBtnExp:$("#removeBtn-table-exp"),authGoogle:$(".auth-google"),signoutGoogle:$(".signout-google"),selectCal:$("#selectCal"),datePickerLoad:$(".date-range-load input"),datePickerLoadIni:$("#datePickerLoadIni"),datePickerLoadEnd:$("#datePickerLoadEnd"),loadImgLink:$(".load-img-link"),calendarTabContent:$("#load-google-cal")},o=document.querySelector(t.inputType),i=document.querySelector(t.inputDescription),r=document.querySelector(t.inputValue),l=document.querySelector(t.datePicker),c=function(e,t){for(var n=0;n<e.length;n++)t(e[n],n)},s=function(e){var t=e.map(function(e){return e.description});return[{type:"pie",values:e.map(function(e){return e.value}),labels:t}]},u=function(){return{}},d=function(e){var t=Array(2);return["inc","exp"].forEach(function(n,a){for(var o=e[n].map(function(e){return e.date}),i=e[n].map(function(e){return e.value}),r=[],l=[],c=o.slice(),s=i.slice(),u=0;u<o.length;u++){if("break"===function(e){if(0===c.length)return"break";for(var t=0;;){var n=c.findIndex(function(t){return t===o[e]});if(!(n>=0)){l.push(o[e]),r.push(t);break}t+=s[n],c.splice(n,1),s.splice(n,1)}}(u))break}var d={x:l,y:r,name:n,type:"bar"};t[a]=d}),t},p=function(e,t){var n=e.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,");return("exp"===t?"-":"+")+" "+n},g=function(e){var t=$(e+" div.active");return t.length>0?t[0]:t},f=function(e){function t(e){return e<10?"0"+e:e}var n=new Date(e);return[t(n.getMonth()+1),t(n.getDate()),n.getFullYear()].join("-")},h=function(){var e=f(Date.now());document.getElementById(t.datePicker.slice(1)).value=e,$("#datepicker").datepicker({autoclose:!0}),$(".date-range-load").each(function(e){$(this).datepicker("clearDates")}),n.datePickerLoad.each(function(t){$(this)[0].value=e})},v=function(e){return'<span style="font-size: 12px;"><em>'+e+"</em></span>"},m=function(e){return'<span style="font-size: 12px;">'+e+"</span>"},b=function(e,t){var n=e.split("-"),a=parseInt(n[0]),o=parseInt(n[1]),i=parseInt(n[2]),n=t.split("-"),r=parseInt(n[0]),l=parseInt(n[1]),c=parseInt(n[2]);return i<c?-1:i>c?1:a<r?-1:a>r?1:o<l?-1:o>l?1:0},y=function(t,n){var a=e(t),o=e(n);return a<o?-1:a>o?1:0},x=function(){return[{field:"id",title:"",visible:!1},{field:"state",title:"",checkbox:!0},{field:"date",title:"Date",align:"center",class:"col-xs-4",sortable:!0,formatter:v,sorter:b},{field:"description",title:"Description",align:"center",class:"col-xs-4",sortable:!0},{field:"value",title:"Value",align:"center",class:"col-xs-4",sortable:!0,sorter:y,formatter:m}]},I=function(e){h(),S()},S=function(){n.incTable.hide(),n.expTable.hide(),n.incTable.bootstrapTable({data:[],columns:x()}),n.expTable.bootstrapTable({data:[],columns:x()})};return{addValueSettings:function(){var e=o.options[o.selectedIndex].value;return{value:parseFloat(r.value),description:i.value,type:e,date:f(l.value)}},addListItem:function(e,t){var a;"inc"===t?a=n.incTable:"exp"===t&&(a=n.expTable),a.bootstrapTable("append",{id:e.id,description:e.description,value:p(e.value,t),date:e.date})},getDOMStrings:function(){return t},getDOMElements:function(){return n},deleteListItem:function(e){document.getElementById(e).remove(),this.alertButton("Item deleted.")},clearFields:function(){var e,n;e=document.querySelectorAll(t.inputDescription+", "+t.inputValue),n=Array.prototype.slice.call(e),n.forEach(function(e,t,n){e.value=""}),n[0].focus()},resetAllItems:function(e){n.incTable.bootstrapTable("removeAll"),n.expTable.bootstrapTable("removeAll")},displayPercentages:function(e){var n=document.querySelectorAll(t.expensesPercentages);c(n,function(t,n){t.textContent=e[n]>0?e[n]+"%":"---"})},displayBudget:function(e){var n;n=e.budget>="0"?"inc":"exp",document.querySelector(t.budgetLabel).textContent=p(e.budget,n),document.querySelector(t.incomeLabel).textContent=p(e.totalInc,"inc"),document.querySelector(t.expenseLabel).textContent=p(e.totalExp,"exp"),e.percentage>=0?document.querySelector(t.percentageLabel).textContent=e.percentage+"%":document.querySelector(t.percentageLabel).textContent="--"},displayMonth:function(){var e=new Date,n=["January","February","March","April","May","June","July","August","September","October","November","December"],a=e.getMonth(),o=e.getFullYear();document.querySelector(t.dateLabel).textContent=n[a]+"/"+o},changedType:function(){var e=document.querySelectorAll(t.inputType+","+t.inputDescription+","+t.inputValue);c(e,function(e){e.classList.add("red-focus")}),document.querySelector(t.inputBtn).classList.toggle("red")},generatePieCharts:function(e,t){var n={height:400,width:700,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",legend:{font:{size:14,color:"white"}},xaxis:{tickcolor:"#fff"}},a={family:"Lato",color:"white",size:14};if(e.length>0){var o=s(e);o[0].textfont=a,Plotly.newPlot(t,o,n)}else console.log("No data to show in chart.")},generateBarCharts:function(e,t){var n,o=(n={height:400,width:700,paper_bgcolor:"rgba(0,0,0,0)",plot_bgcolor:"rgba(0,0,0,0)",legend:{font:{size:14,color:"white"}},xaxis:{tickcolor:"#fff"},barmode:"stack"},a(n,"xaxis",{tickfont:{size:14,color:"rgb(107, 107, 107)"}}),a(n,"yaxis",{title:"$",titlefont:{size:16,color:"rgb(107, 107, 107)"},tickfont:{size:14,color:"rgb(107, 107, 107)"}}),n);if(e.inc.length>0||e.exp.length>0){var i=d(e);Plotly.newPlot(t,i,o)}else console.log("No data to show in chart.")},generateChart:function(e,n){if(n===t.chartIncTab.slice(1))this.generatePieCharts(e.inc,t.chartInc.slice(1));else if(n===t.chartExpTab.slice(1))this.generatePieCharts(e.exp,t.chartExp.slice(1));else if(n===t.chartTimeTab.slice(1)){var a=u();this.generateBarCharts(e,t.chartTimed.slice(1),a)}},getLoadDateRange:function(){return n.datePickerLoad.value,{initial:new Date(n.datePickerLoadIni[0].value).toISOString(),final:new Date(n.datePickerLoadEnd[0].value).toISOString()}},getLoadInfo:function(){var e,a=g(t.loadTabCnt);if(a.id===t.localStorageTabContent){var o=document.querySelector(t.selectLocalStg);e={key:o.options[o.selectedIndex].value,type:"localStorage"}}else if(a.id===t.calendarTabContent){var i=n.selectCal[0].options[n.selectCal[0].selectedIndex].value,r=this.getLoadDateRange();e={calendar:i,type:"GCalendar",dateRange:r}}return e},getSaveDataInfo:function(){var e;g(t.tabSaveContent).id===t.saveLocalStgTabCnt&&(e={key:document.querySelector(t.inputSaveKey).value,type:"localStorage"});return e},helperFillCalendarList:function(e,t){e?t.then(function(e){var t=e.result.items.map(function(e){return{id:e.id,summary:e.summary}});Array.from(n.selectCal[0].options).forEach(function(e,t){0!=t&&e.remove()}),t.forEach(function(e){n.selectCal[0].options.add(new Option(e.summary,e.id))})}):Array.from(n.selectCal[0].options).forEach(function(e,t){0!=t&&e.remove()})},alertButton:function(e){$(".myAlert-bottom").show(),$(".myAlert-bottom strong").text(e),setTimeout(function(){$(".myAlert-bottom").hide()},2e3)},onSignInChange:function(e){e?(n.signoutGoogle.show(),n.authGoogle.hide()):(n.signoutGoogle.hide(),n.authGoogle.show())},init:function(e){I()}}}(),s=function(){function e(e){var t=e.split("-");return t[1]+"-"+t[2]+"-"+t[0]}function t(t){var n={inc:[],exp:[]};return t.forEach(function(t){var a=t.summary,o=e(t.start.date),i=a.split("$"),r=i.slice(0,i.length-1).join().trim(),l=parseFloat(i[i.length-1]);n[l>=0?"inc":"exp"].push({description:r,value:l,date:o})}),n}function n(e,n,a){gapi.client.calendar.events.list({calendarId:e.calendar,timeMin:e.dateRange.initial,timeMax:e.dateRange.final,showDeleted:!1,singleEvents:!0,orderBy:"startTime"}).then(function(e){var a=e.result.items,o=t(a);n(o)}).catch(function(e){a(e)})}function a(e){gapi.auth2.getAuthInstance().signIn()}function o(e){gapi.auth2.getAuthInstance().signOut()}function i(){return gapi.client.calendar.calendarList.list({})}var r,l=["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];document.getElementById("authorize-button"),document.getElementById("signout-button");return{init:function(e){r=e},initClient:function(){gapi.client.init({apiKey:"AIzaSyCOEpOC7Tu4j4Xao67GhrLagnJfOAf9hmA",clientId:"292585574072-b8cv3s6m1eqt8iq403r7bl0huvtdaht2.apps.googleusercontent.com",discoveryDocs:l,scope:"https://www.googleapis.com/auth/calendar.readonly"}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(r),r(gapi.auth2.getAuthInstance().isSignedIn.get())})},signOut:o,signIn:a,isSignedIn:function(){return gapi.auth2.getAuthInstance().isSignedIn.get()},getListOfCalendarsPromise:i,obtainDataFromCalendar:n}}();(function(e,t,n){function a(e){t.onSignInChange(e);var a=n.getListOfCalendarsPromise();t.helperFillCalendarList(e,a)}var o,i,l=function(){o=t.getDOMStrings(),i=t.getDOMElements(),document.querySelector(o.inputBtn).addEventListener("click",f),document.addEventListener("keypress",function(e){13!==e.keyCode&&13!==e.which||f()}),document.querySelector(o.inputType).addEventListener("change",t.changedType),$(o.tabLoad).on("shown.bs.tab",I),document.querySelector(o.okLoadBtn).addEventListener("click",x),document.querySelector(o.okSaveBtn).addEventListener("click",T),$(o.tabChart).on("shown.bs.tab",L),i.removeTableRowBtnInc.on("click",s),i.removeTableRowBtnExp.on("click",u),i.authGoogle.on("click",n.signIn),i.signoutGoogle.on("click",n.signOut),i.loadImgLink.on("click",function(e){$("#nav-tab-load-cal").trigger("click"),console.log("e",e)})},s=function(n){var a=$.map(i.incTable.bootstrapTable("getSelections"),function(e){return e.id});i.incTable.bootstrapTable("remove",{field:"id",values:a}),a.forEach(function(t){e.deleteItem("inc",t)}),p(),t.alertButton("Item deleted.")},u=function(n){var a=$.map(i.expTable.bootstrapTable("getSelections"),function(e){return e.id});i.expTable.bootstrapTable("remove",{field:"id",values:a}),a.forEach(function(t){e.deleteItem("exp",t)}),p(),t.alertButton("Item deleted.")},d=function(e){var t=!0,n=e.description;return""!==n.trim()&&void 0!==n&&null!==n||(t=!1),(isNaN(e.value)||e.value<=0)&&(t=!1),t},p=function(){e.calculateBudget();var t=e.getBudget();c.displayBudget(t)},g=function(n){if(d(n)){var a=e.addItem(n.type,n.description,n.value,n.date);t.addListItem(a,n.type),t.clearFields(),p(),h()}},f=function(){var e=t.addValueSettings();g(e)},h=function(){e.calculatePercentages();var n=e.getPercentages();t.displayPercentages(n)},v=function(a,o){var i=t.getLoadInfo();"localStorage"===i.type?e.loadDataLocalStorage(i,a,o):"GCalendar"===i.type&&n.obtainDataFromCalendar(i,a,o)},m=function(n){e.resetInternalData(),t.resetAllItems(),i.incTable.show(),i.expTable.show();var a={description:"",value:0,type:"inc"};n.inc.forEach(function(e){a.description=e.description,a.value=e.value,a.date=e.date,g(a)}),a.type="exp",n.exp.forEach(function(e){a.description=e.description,a.value=Math.abs(e.value),g(a)})},b=function(e){m(e),$(o.loadModal).modal("hide")},y=function(e){console.log(e),t.alertButton("Error loading."),$(o.loadModal).modal("hide")},x=function(e){n.isSignedIn()?v(b,y):(t.alertButton("No data loaded."),$(o.loadModal).modal("hide"))},I=function(e){var a,i=e.target;if("nav-tab-load-stg"===i.id){a=document.querySelector(o.selectLocalStg);var r=Object.keys(localStorage),l=a.options.length;if(l>1)for(var c=1;c<l;c++)a.options.remove(1);r.forEach(function(e){a.options.add(new Option(e,e))})}else if("nav-tab-load-cal"===i.id&&n.isSignedIn()){var s=n.getListOfCalendarsPromise();t.helperFillCalendarList(n.isSignedIn(),s)}},S=function(e,t){localStorage.setItem(t.key,e)},C=function(e,t,n){n(e,t)},T=function(){var n=e.data2SimpleScheme(),a=JSON.stringify(n),i=t.getSaveDataInfo();"localStorage"===i.type?C(a,i,S):console.log("saving error"),$(o.saveModal).modal("hide")},L=function(n){var a=n.target,o=e.getAllDataItems();t.generateChart(o,a.id)};return{init:function(){console.log("Application has started."),t.init(),n.init(a),t.displayMonth(),t.displayBudget({budget:0,percentage:0,totalInc:0,totalExp:0}),l(),m(r)}}})(l,c,s).init(),window.onload=function(e){this.onload=function(){},o()},window.onreadystatechange=function(e){"complete"===this.readyState&&this.onload()}},function(e,t){!function(e){"use strict";e('a.js-scroll-trigger[href*="#"]:not([href="#"])').click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=e(this.hash);if(t=t.length?t:e("[name="+this.hash.slice(1)+"]"),t.length)return e("html, body").animate({scrollTop:t.offset().top-48},1e3,"easeInOutExpo"),!1}}),e(".js-scroll-trigger").click(function(){e(".navbar-collapse").collapse("hide")}),e("body").scrollspy({target:"#mainNav",offset:54});var t=function(){e("#mainNav").offset().top>100?e("#mainNav").addClass("navbar-shrink"):e("#mainNav").removeClass("navbar-shrink")};t(),e(window).scroll(t)}(jQuery)}]);
//# sourceMappingURL=bundle.js.map
{"version":3,"sources":["webpack:///bundle.js","webpack:///webpack/bootstrap e0ab85b65c023ca6f896","webpack:///./js/app.js","webpack:///./js/grayscale.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_defineProperty","obj","key","value","writable","handleClientLoad","gapi","load","googleAPIController","initClient","__WEBPACK_IMPORTED_MODULE_0__grayscale_js__","initBudgetData","inc","description","date","exp","budgetController","Expense","id","this","percentage","calcPercentages","totInc","Math","round","getPercentage","Income","data","allItems","totals","budget","initializeBudgetData","calculateTotal","type","sum","forEach","v","addItem","desc","val","newItem","ID","length","push","deleteItem","itemDelete","findIndex","el","undefined","splice","calculateBudget","calculatePercentages","cur","getPercentages","map","loadDataLocalStorage","loadInfo","actionWhenDataIsLoaded","actionWhenError","JSON","parse","localStorage","getItem","error","getBudget","totalInc","totalExp","resetInternalData","getAllDataItems","data2SimpleScheme","testing","UIController","formattedNumberToFloat","numString","splitted","split","sign","trim","int_dec","val_int","parseFloat","join","val_dec","DOMstrings","inputType","inputDescription","inputValue","inputBtn","incomeContainer","expensesContainer","budgetLabel","incomeLabel","expenseLabel","percentageLabel","listItems","expensesPercentages","dateLabel","loadBtn","saveBtn","chartDiv","item","selectLocalStg","tabLoad","okLoadBtn","loadTabCnt","localStorageTabContent","fileSysTabContent","loadModal","inputSaveKey","okSaveBtn","tabSaveContent","saveLocalStgTabCnt","tabChart","chartIncTab","chartExpTab","chartTimeTab","chartInc","chartTimed","chartExp","saveModal","datePicker","calendarTabContent","DOMElements","incTable","$","expTable","removeTableRowBtnInc","removeTableRowBtnExp","authGoogle","signoutGoogle","selectCal","datePickerLoad","datePickerLoadIni","datePickerLoadEnd","loadImgLink","$addType","document","querySelector","$addDescription","$addValue","$addDate","nodeListForEach","list","callback","treatDataForPieChart","dataList","labels","values","getTimedChartInfo","treatDataForBarChart","Array","idx","it","arrVals","arrLbls","remainLbls","slice","remainVals","k","accm","idxOf","aux","x","y","formatNumber","num","tipo","toFixed","replace","getActiveTabContent","tabContentString","elActiveContent","convertDate","inputFormat","pad","Date","getMonth","getDate","getFullYear","initializeDatePicker","today","now","getElementById","datepicker","autoclose","each","dateTableFormatter","valueTableFormatter","dateSorter","before","after","mm_dd_yyyy","mm","parseInt","dd","yyyy","mmA","ddA","yyyyA","valueSorter","num_before","num_after","getColumnsTableSettings","field","title","visible","checkbox","align","class","sortable","formatter","sorter","initializeModule","params","initializeTables","hide","bootstrapTable","columns","addValueSettings","selectedType","options","selectedIndex","addListItem","$tableEl","getDOMStrings","getDOMElements","deleteListItem","selectorID","remove","alertButton","clearFields","fields","fieldsArray","querySelectorAll","array","focus","resetAllItems","displayPercentages","percentages","percEle","textContent","displayBudget","typeAdd","displayMonth","monthNames","month","year","changedType","classList","add","toggle","generatePieCharts","dataChart","destElString","layout","height","width","paper_bgcolor","plot_bgcolor","legend","font","size","color","xaxis","tickcolor","textfont","family","dataInc","Plotly","newPlot","console","log","generateBarCharts","_layout","barmode","tickfont","titlefont","dataTreated","generateChart","dataAll","infos","getLoadDateRange","initial","toISOString","final","getLoadInfo","activeCnt","selectOpt","calSelected","loadedRange","calendar","dateRange","getSaveDataInfo","saveInfo","helperFillCalendarList","isSignedIn","promiseCalList","then","resp","calIdSummary","result","items","summary","from","Option","msg","show","text","setTimeout","onSignInChange","init","fromYYYYMMDDtoMMDDYYYY","dateStr","splt","calendarEventToData","events","dataLoaded","when","start","obtainDataFromCalendar","client","calendarId","timeMin","timeMax","showDeleted","singleEvents","orderBy","response","catch","err","handleAuthClick","event","auth2","getAuthInstance","signIn","handleSignoutClick","signOut","getListOfCalendarsPromise","calendarList","actionAuthChange","DISCOVERY_DOCS","actionAuthChange_","apiKey","clientId","discoveryDocs","scope","listen","budgetCtrl","UICtrl","gApiCtrl","setupEventListeners","addEventListener","addValueButton","e","keyCode","which","on","activeLoadTab","clickLoadData","clickSaveData","activeChartTab","clickRemoveTableRowBtnInc","clickRemoveTableRowBtnExp","trigger","ids","row","updateBudget","validateAddValues","addedSettings","isValid","isNaN","addItemProcedure","updatePercentages","allPerc","retrieveLoadedDataCases","loadDataAdjustUIFromObject","budgetData","auxItem","abs","modal","selecEl","target","localKeys","keys","lenOpts","saveDataLocalStorage","dataJson","setItem","saveData","descripAndVals","jsonIncExp","stringify","dataAllItems","window","onload","onreadystatechange","readyState","click","location","pathname","hostname","hash","animate","scrollTop","offset","top","collapse","scrollspy","navbarCollapse","addClass","removeClass","scroll","jQuery"],"mappings":"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","file":"bundle.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__grayscale_js__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__grayscale_js___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__grayscale_js__);\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Imports:\n\n\n// #####################################################\n// #####################################################\n// DUMMY DATA\n// #####################################################\n// #####################################################\n\nvar initBudgetData = {\n\tinc: [{ description: 'Web dev Butcher Project ', value: 500, date: '02-01-2018' }, { description: 'Backend Project for Spotify ', value: 2500, date: '02-03-2018' }, { description: 'Sold U2 ticket ', value: 500, date: '01-14-2018' }, { description: 'Salary ', value: 8000, date: '11-01-2017' }, { description: 'Freelance toptal VueJS for geolocation ', value: 1245.20, date: '12-01-2017' }],\n\texp: [{ description: 'Daycare', value: 2200, date: '02-01-2018' }, { description: 'Clothes', value: 200.21, date: '02-01-2018' }, { description: 'Bills', value: 625.00, date: '02-01-2018' }, { description: 'Friday 13 Happy hour', value: 125.70, date: '02-01-2018' }]\n\n\t// #####################################################\n\t// #####################################################\n\t// MODEL\n\t// #####################################################\n\t// #####################################################\n\n};var budgetController = function () {\n\n\tvar Expense = function Expense(id, description, value, date) {\n\t\tthis.id = id;\n\t\tthis.description = description;\n\t\tthis.value = value;\n\t\tthis.percentage = -1;\n\t\tthis.date = date;\n\t};\n\n\tExpense.prototype.calcPercentages = function (totInc) {\n\t\tif (totInc > 0.0) {\n\t\t\tthis.percentage = Math.round(this.value / totInc * 100);\n\t\t} else {\n\t\t\tthis.percentage = -1;\n\t\t}\n\t};\n\n\tExpense.prototype.getPercentage = function () {\n\t\treturn this.percentage;\n\t};\n\n\tvar Income = function Income(id, description, value, date) {\n\t\tthis.id = id;\n\t\tthis.description = description;\n\t\tthis.value = value;\n\t\tthis.date = date;\n\t};\n\n\tvar data = {\n\t\tallItems: {\n\t\t\texp: [],\n\t\t\tinc: []\n\t\t},\n\t\ttotals: {\n\t\t\texp: 0,\n\t\t\tinc: 0\n\t\t},\n\t\tbudget: 0,\n\t\tpercentage: -1\n\t};\n\n\tvar initializeBudgetData = function initializeBudgetData() {\n\t\tdata = {\n\t\t\tallItems: {\n\t\t\t\texp: [],\n\t\t\t\tinc: []\n\t\t\t},\n\t\t\ttotals: {\n\t\t\t\texp: 0,\n\t\t\t\tinc: 0\n\t\t\t},\n\t\t\tbudget: 0,\n\t\t\tpercentage: -1\n\t\t};\n\t};\n\n\tvar calculateTotal = function calculateTotal(type) {\n\t\tvar sum = 0.0;\n\t\tdata.allItems[type].forEach(function (v) {\n\t\t\tsum += v.value;\n\t\t});\n\t\tdata.totals[type] = sum;\n\t};\n\n\treturn {\n\n\t\taddItem: function addItem(type, desc, val, date) {\n\t\t\tvar newItem, ID;\n\n\t\t\tif (data.allItems[type].length > 0) {\n\t\t\t\tID = data.allItems[type][data.allItems[type].length - 1].id + 1;\n\t\t\t} else {\n\t\t\t\tID = 0;\n\t\t\t}\n\n\t\t\tif (type === 'exp') {\n\t\t\t\tnewItem = new Expense(ID, desc, val, date);\n\t\t\t} else if (type === 'inc') {\n\t\t\t\tnewItem = new Income(ID, desc, val, date);\n\t\t\t}\n\n\t\t\tdata.allItems[type].push(newItem);\n\t\t\treturn newItem;\n\t\t},\n\n\t\tdeleteItem: function deleteItem(type, ID) {\n\t\t\tvar itemDelete = data.allItems[type].findIndex(function (el, i) {\n\t\t\t\treturn el.id === ID;\n\t\t\t});\n\t\t\tif (itemDelete !== null || itemDelete !== undefined) {\n\t\t\t\tdata.allItems[type].splice(itemDelete, 1);\n\t\t\t}\n\t\t},\n\n\t\tcalculateBudget: function calculateBudget() {\n\t\t\t// Calculate total income and expenses\n\t\t\tcalculateTotal('inc');\n\t\t\tcalculateTotal('exp');\n\n\t\t\t// Calculate the budget: income - expenses\n\t\t\tdata.budget = data.totals['inc'] - data.totals['exp'];\n\n\t\t\t// Calculate the percentage of income that we spent\n\t\t\tif (data.totals.inc > 0.0) {\n\t\t\t\tdata.percentage = Math.round(data.totals.exp / data.totals.inc * 100.0);\n\t\t\t} else {\n\t\t\t\tdata.percentage = -1;\n\t\t\t}\n\t\t},\n\n\t\tcalculatePercentages: function calculatePercentages() {\n\t\t\tdata.allItems['exp'].forEach(function (cur) {\n\t\t\t\tcur.calcPercentages(data.totals.inc);\n\t\t\t});\n\t\t},\n\n\t\tgetPercentages: function getPercentages() {\n\t\t\tvar allPerc = data.allItems.exp.map(function (cur) {\n\t\t\t\treturn cur.getPercentage();\n\t\t\t});\n\t\t\treturn allPerc;\n\t\t},\n\n\t\tloadDataLocalStorage: function loadDataLocalStorage(loadInfo, actionWhenDataIsLoaded, actionWhenError) {\n\t\t\tvar dataLoaded;\n\t\t\ttry {\n\t\t\t\tvar dataLoaded = JSON.parse(localStorage.getItem(loadInfo.key));\n\t\t\t\tactionWhenDataIsLoaded(dataLoaded);\n\t\t\t} catch (error) {\n\t\t\t\tactionWhenError(error);\n\t\t\t}\n\t\t},\n\n\t\tgetBudget: function getBudget() {\n\t\t\treturn {\n\t\t\t\tbudget: data.budget,\n\t\t\t\tpercentage: data.percentage,\n\t\t\t\ttotalInc: data.totals.inc,\n\t\t\t\ttotalExp: data.totals.exp\n\t\t\t};\n\t\t},\n\n\t\tresetInternalData: function resetInternalData() {\n\t\t\tinitializeBudgetData();\n\t\t},\n\t\tgetAllDataItems: function getAllDataItems() {\n\t\t\treturn data.allItems;\n\t\t},\n\t\tdata2SimpleScheme: function data2SimpleScheme() {\n\t\t\treturn data.allItems;\n\t\t},\n\t\ttesting: function testing() {\n\t\t\treturn data;\n\t\t}\n\t};\n}();\n\n// #####################################################\n// #####################################################\n// VIEW\n// #####################################################\n// #####################################################\n\nvar UIController = function () {\n\n\tvar DOMstrings = {\n\t\tinputType: '.add__type',\n\t\tinputDescription: '.add__description',\n\t\tinputValue: '.add__value',\n\t\tinputBtn: '.add__btn',\n\t\tincomeContainer: '.income__list',\n\t\texpensesContainer: '.expenses__list',\n\t\tbudgetLabel: '.budget__value',\n\t\tincomeLabel: '.budget__income--value',\n\t\texpenseLabel: '.budget__expenses--value',\n\t\tpercentageLabel: '.budget__expenses--percentage',\n\t\tlistItems: '.list-items',\n\t\texpensesPercentages: '.item__percentage',\n\t\tdateLabel: '.budget__title--month',\n\t\tloadBtn: '.load__btn',\n\t\tsaveBtn: '.save__btn',\n\t\tchartDiv: '.charts',\n\t\titem: '.item',\n\t\tselectLocalStg: '#selectLocalStg',\n\t\ttabLoad: '.tab-load',\n\t\tokLoadBtn: '.ok-load-btn',\n\t\tloadTabCnt: '#tabLoadContent',\n\t\tlocalStorageTabContent: 'load-local-stg',\n\t\tfileSysTabContent: '#load-file-sys',\n\t\tloadModal: '#loadModal',\n\t\tinputSaveKey: '#inputSaveKey',\n\t\tokSaveBtn: '.ok-save-btn',\n\t\ttabSaveContent: '#tabSaveContent',\n\t\tsaveLocalStgTabCnt: 'save-local-stg',\n\t\ttabChart: '#tabChart',\n\t\tchartIncTab: '#chart-inc-tab',\n\t\tchartExpTab: '#chart-exp-tab',\n\t\tchartTimeTab: '#chart-time-tab',\n\t\tchartInc: '#chart-inc-content',\n\t\tchartTimed: '#chart-time-content',\n\t\tchartExp: '#chart-exp-content',\n\t\tsaveModal: '#saveModal',\n\t\tdatePicker: '#datepicker',\n\t\t// datePickerLoad: '.date-range-load',\n\t\tcalendarTabContent: 'load-google-cal'\n\t};\n\n\tvar DOMElements = {\n\t\tincTable: $('#inc-table'),\n\t\texpTable: $('#exp-table'),\n\t\tremoveTableRowBtnInc: $('#removeBtn-table-inc'),\n\t\tremoveTableRowBtnExp: $('#removeBtn-table-exp'),\n\t\tauthGoogle: $('.auth-google'),\n\t\tsignoutGoogle: $('.signout-google'),\n\t\tselectCal: $('#selectCal'),\n\t\tdatePickerLoad: $('.date-range-load input'),\n\t\tdatePickerLoadIni: $('#datePickerLoadIni'),\n\t\tdatePickerLoadEnd: $('#datePickerLoadEnd'),\n\t\tloadImgLink: $('.load-img-link'),\n\t\tcalendarTabContent: $('#load-google-cal')\n\t};\n\n\tvar $addType = document.querySelector(DOMstrings.inputType);\n\tvar $addDescription = document.querySelector(DOMstrings.inputDescription);\n\tvar $addValue = document.querySelector(DOMstrings.inputValue);\n\tvar $addDate = document.querySelector(DOMstrings.datePicker);\n\n\tvar nodeListForEach = function nodeListForEach(list, callback) {\n\t\tfor (var _i = 0; _i < list.length; _i++) {\n\t\t\tcallback(list[_i], _i);\n\t\t}\n\t};\n\n\tvar treatDataForPieChart = function treatDataForPieChart(dataList) {\n\t\tvar labels = dataList.map(function (cur) {\n\t\t\treturn cur.description;\n\t\t});\n\t\tvar values = dataList.map(function (cur) {\n\t\t\treturn cur.value;\n\t\t});\n\t\treturn [{\n\t\t\ttype: 'pie',\n\t\t\tvalues: values,\n\t\t\tlabels: labels\n\t\t}];\n\t};\n\n\tvar getTimedChartInfo = function getTimedChartInfo() {\n\t\treturn {};\n\t};\n\n\tvar treatDataForBarChart = function treatDataForBarChart(dataList) {\n\t\tvar data = Array(2);\n\t\t['inc', 'exp'].forEach(function (cur, idx) {\n\t\t\tvar labels = dataList[cur].map(function (it) {\n\t\t\t\treturn it.date;\n\t\t\t});\n\t\t\tvar values = dataList[cur].map(function (it) {\n\t\t\t\treturn it.value;\n\t\t\t});\n\t\t\tvar arrVals = [],\n\t\t\t    arrLbls = [];\n\t\t\tvar remainLbls = labels.slice(),\n\t\t\t    remainVals = values.slice();\n\n\t\t\tvar _loop = function _loop(k) {\n\t\t\t\tif (remainLbls.length === 0) {\n\t\t\t\t\treturn 'break';\n\t\t\t\t}\n\t\t\t\tvar flag = true;\n\t\t\t\tvar accm = 0.0;\n\t\t\t\twhile (flag) {\n\t\t\t\t\tvar idxOf = remainLbls.findIndex(function (el) {\n\t\t\t\t\t\treturn el === labels[k] ? true : false;\n\t\t\t\t\t});\n\t\t\t\t\tif (idxOf >= 0) {\n\t\t\t\t\t\taccm += remainVals[idxOf];\n\t\t\t\t\t\tremainLbls.splice(idxOf, 1);\n\t\t\t\t\t\tremainVals.splice(idxOf, 1);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarrLbls.push(labels[k]);\n\t\t\t\t\t\tarrVals.push(accm);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tfor (var k = 0; k < labels.length; k++) {\n\t\t\t\tvar _ret = _loop(k);\n\n\t\t\t\tif (_ret === 'break') break;\n\t\t\t}\n\t\t\tvar aux = {\n\t\t\t\tx: arrLbls,\n\t\t\t\ty: arrVals,\n\t\t\t\tname: cur,\n\t\t\t\ttype: 'bar'\n\t\t\t};\n\t\t\tdata[idx] = aux;\n\t\t});\n\t\treturn data;\n\t};\n\n\tvar formatNumber = function formatNumber(num, tipo) {\n\t\tvar sign;\n\t\t// num = Math.abs(num);\n\t\t// num = num.toFixed(2);\n\t\t// var numSplit = num.split('.');\n\t\t// var int = numSplit[0];\n\t\t// var dec = numSplit[1];\n\t\t// if (int.length > 3) {\n\t\t// \tint = int.substr(0, int.length - 3) + ',' + int.substr(int.length - 3, 3);\n\t\t// };\n\t\t// const val = this.totalFormatter(num);\n\t\tvar val = num.toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,');\n\t\ttipo === 'exp' ? sign = '-' : sign = '+';\n\n\t\t// return sign + ' ' + int + '.' + dec;\n\t\treturn sign + ' ' + val;\n\t};\n\n\tfunction formattedNumberToFloat(numString) {\n\t\tvar splitted = numString.split(' ');\n\t\tvar sign = splitted[0].trim()[0];\n\t\tvar int_dec = splitted[1].split('.');\n\t\tvar val_int = parseFloat(int_dec[0].split(',').join(''));\n\t\tvar val_dec = parseFloat(int_dec[1]);\n\t\tvar val = val_int + val_dec / 100.0;\n\t\tvar val_final = sign === '+' ? val : -val;\n\t\treturn val_final;\n\t}\n\n\tvar getActiveTabContent = function getActiveTabContent(tabContentString) {\n\t\tvar elActiveContent = $(tabContentString + ' div.active');\n\t\tvar retEl = elActiveContent.length > 0 ? elActiveContent[0] : elActiveContent;\n\t\treturn retEl;\n\t};\n\n\tvar convertDate = function convertDate(inputFormat) {\n\t\tfunction pad(s) {\n\t\t\treturn s < 10 ? '0' + s : s;\n\t\t}\n\t\tvar d = new Date(inputFormat);\n\t\treturn [pad(d.getMonth() + 1), pad(d.getDate()), d.getFullYear()].join('-');\n\t};\n\n\tvar initializeDatePicker = function initializeDatePicker() {\n\t\tvar today = convertDate(Date.now());\n\t\tdocument.getElementById(DOMstrings.datePicker.slice(1)).value = today;\n\t\t$('#datepicker').datepicker({ autoclose: true });\n\t\t$('.date-range-load').each(function (cur) {\n\t\t\t$(this).datepicker('clearDates'); // 'clearDates'\n\t\t});\n\t\tDOMElements.datePickerLoad.each(function (cur) {\n\t\t\t$(this)[0].value = today;\n\t\t});\n\t};\n\n\tvar dateTableFormatter = function dateTableFormatter(value) {\n\t\treturn '<span style=\"font-size: 12px;\"><em>' + value + '</em></span>';\n\t};\n\n\tvar valueTableFormatter = function valueTableFormatter(value) {\n\t\treturn '<span style=\"font-size: 12px;\">' + value + '</span>';\n\t};\n\n\tvar dateSorter = function dateSorter(before, after) {\n\t\tvar mm_dd_yyyy = before.split('-');\n\t\tvar mm = parseInt(mm_dd_yyyy[0]);\n\t\tvar dd = parseInt(mm_dd_yyyy[1]);\n\t\tvar yyyy = parseInt(mm_dd_yyyy[2]);\n\t\tvar mm_dd_yyyy = after.split('-');\n\t\tvar mmA = parseInt(mm_dd_yyyy[0]);\n\t\tvar ddA = parseInt(mm_dd_yyyy[1]);\n\t\tvar yyyyA = parseInt(mm_dd_yyyy[2]);\n\t\tif (yyyy < yyyyA) return -1;\n\t\tif (yyyy > yyyyA) return 1;\n\t\tif (mm < mmA) return -1;\n\t\tif (mm > mmA) return 1;\n\t\tif (dd < ddA) return -1;\n\t\tif (dd > ddA) return 1;\n\t\treturn 0;\n\t};\n\n\tvar valueSorter = function valueSorter(before, after) {\n\t\tvar num_before = formattedNumberToFloat(before);\n\t\tvar num_after = formattedNumberToFloat(after);\n\t\tif (num_before < num_after) return -1;\n\t\tif (num_before > num_after) return 1;\n\t\treturn 0;\n\t};\n\n\tvar getColumnsTableSettings = function getColumnsTableSettings() {\n\t\tvar columns = [{\n\t\t\t\"field\": \"id\",\n\t\t\t\"title\": \"\",\n\t\t\t\"visible\": false\n\t\t}, {\n\t\t\t\"field\": \"state\",\n\t\t\t\"title\": \"\",\n\t\t\t\"checkbox\": true\n\t\t}, {\n\t\t\t\"field\": \"date\",\n\t\t\t\"title\": \"Date\",\n\t\t\t\"align\": \"center\",\n\t\t\t\"class\": \"col-xs-4\",\n\t\t\t\"sortable\": true,\n\t\t\t\"formatter\": dateTableFormatter,\n\t\t\t\"sorter\": dateSorter\n\t\t}, {\n\t\t\t\"field\": \"description\",\n\t\t\t\"title\": \"Description\",\n\t\t\t\"align\": \"center\",\n\t\t\t\"class\": \"col-xs-4\",\n\t\t\t\"sortable\": true\n\t\t}, {\n\t\t\t\"field\": \"value\",\n\t\t\t\"title\": \"Value\",\n\t\t\t\"align\": \"center\",\n\t\t\t\"class\": \"col-xs-4\",\n\t\t\t\"sortable\": true,\n\t\t\t\"sorter\": valueSorter,\n\t\t\t\"formatter\": valueTableFormatter\n\t\t}];\n\t\treturn columns;\n\t};\n\n\tvar initializeModule = function initializeModule(params) {\n\t\tinitializeDatePicker();\n\t\tinitializeTables();\n\t};\n\n\tvar initializeTables = function initializeTables() {\n\t\tDOMElements.incTable.hide();\n\t\tDOMElements.expTable.hide();\n\t\t// DOMElements.incTable.find('th[data-field=\"date\"]').\n\t\t// attr('data-formatter', 'dateTableFormatter');\n\t\tDOMElements.incTable.bootstrapTable({ data: [], columns: getColumnsTableSettings() });\n\t\tDOMElements.expTable.bootstrapTable({ data: [], columns: getColumnsTableSettings() });\n\t};\n\n\treturn {\n\t\taddValueSettings: function addValueSettings() {\n\t\t\tvar selectedType = $addType.options[$addType.selectedIndex].value;\n\t\t\treturn {\n\t\t\t\tvalue: parseFloat($addValue.value),\n\t\t\t\tdescription: $addDescription.value,\n\t\t\t\ttype: selectedType,\n\t\t\t\tdate: convertDate($addDate.value)\n\t\t\t};\n\t\t},\n\n\t\taddListItem: function addListItem(obj, type) {\n\t\t\tvar html, newHtml, element;\n\t\t\tvar $tableEl;\n\t\t\tif (type === 'inc') {\n\t\t\t\t$tableEl = DOMElements.incTable;\n\t\t\t} else if (type === 'exp') {\n\t\t\t\t$tableEl = DOMElements.expTable;\n\t\t\t}\n\n\t\t\t$tableEl.bootstrapTable('append', {\n\t\t\t\tid: obj.id,\n\t\t\t\tdescription: obj.description,\n\t\t\t\tvalue: formatNumber(obj.value, type),\n\t\t\t\tdate: obj.date\n\t\t\t});\n\t\t},\n\n\t\tgetDOMStrings: function getDOMStrings() {\n\t\t\treturn DOMstrings;\n\t\t},\n\n\t\tgetDOMElements: function getDOMElements() {\n\t\t\treturn DOMElements;\n\t\t},\n\n\t\tdeleteListItem: function deleteListItem(selectorID) {\n\t\t\tdocument.getElementById(selectorID).remove();\n\t\t\tthis.alertButton('Item deleted.');\n\t\t},\n\n\t\tclearFields: function clearFields() {\n\t\t\tvar fields, fieldsArray;\n\t\t\tfields = document.querySelectorAll(DOMstrings.inputDescription + ', ' + DOMstrings.inputValue);\n\n\t\t\tfieldsArray = Array.prototype.slice.call(fields);\n\n\t\t\tfieldsArray.forEach(function (cur, i, array) {\n\t\t\t\tcur.value = '';\n\t\t\t});\n\n\t\t\tfieldsArray[0].focus();\n\t\t},\n\n\t\tresetAllItems: function resetAllItems(params) {\n\t\t\t//BUG HERE USING OLDER ITEM\n\t\t\t// var allItemsElements = document.querySelectorAll(DOMstrings.item);\n\t\t\t// nodeListForEach(allItemsElements, function (cur, idx) {\n\t\t\t// \tcur.remove();\n\t\t\t// });\n\t\t\tDOMElements.incTable.bootstrapTable('removeAll');\n\t\t\tDOMElements.expTable.bootstrapTable('removeAll');\n\t\t},\n\n\t\tdisplayPercentages: function displayPercentages(percentages) {\n\t\t\tvar percEle = document.querySelectorAll(DOMstrings.expensesPercentages);\n\n\t\t\tnodeListForEach(percEle, function (cur, i) {\n\t\t\t\tcur.textContent = percentages[i] > 0.0 ? percentages[i] + '%' : '---';\n\t\t\t});\n\t\t},\n\n\t\tdisplayBudget: function displayBudget(obj) {\n\t\t\tvar typeAdd;\n\t\t\tobj.budget >= \"0\" ? typeAdd = 'inc' : typeAdd = 'exp';\n\t\t\tdocument.querySelector(DOMstrings.budgetLabel).textContent = formatNumber(obj.budget, typeAdd);\n\t\t\tdocument.querySelector(DOMstrings.incomeLabel).textContent = formatNumber(obj.totalInc, 'inc');\n\t\t\tdocument.querySelector(DOMstrings.expenseLabel).textContent = formatNumber(obj.totalExp, 'exp');\n\n\t\t\tif (obj.percentage >= 0.0) {\n\t\t\t\tdocument.querySelector(DOMstrings.percentageLabel).textContent = obj.percentage + '%';\n\t\t\t} else {\n\t\t\t\tdocument.querySelector(DOMstrings.percentageLabel).textContent = '--';\n\t\t\t}\n\t\t},\n\n\t\tdisplayMonth: function displayMonth() {\n\t\t\tvar now = new Date();\n\t\t\tvar monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n\t\t\tvar month = now.getMonth();\n\t\t\tvar year = now.getFullYear();\n\t\t\tdocument.querySelector(DOMstrings.dateLabel).textContent = monthNames[month] + '/' + year;\n\t\t},\n\n\t\tchangedType: function changedType() {\n\t\t\tvar fields = document.querySelectorAll(DOMstrings.inputType + ',' + DOMstrings.inputDescription + ',' + DOMstrings.inputValue);\n\t\t\tnodeListForEach(fields, function (cur) {\n\t\t\t\tcur.classList.add('red-focus');\n\t\t\t});\n\t\t\tdocument.querySelector(DOMstrings.inputBtn).classList.toggle('red');\n\t\t},\n\n\t\tgeneratePieCharts: function generatePieCharts(dataChart, destElString) {\n\t\t\tvar layout = {\n\t\t\t\theight: 400,\n\t\t\t\twidth: 700,\n\t\t\t\tpaper_bgcolor: 'rgba(0,0,0,0)',\n\t\t\t\tplot_bgcolor: 'rgba(0,0,0,0)',\n\t\t\t\tlegend: {\n\t\t\t\t\tfont: { size: 14, color: 'white' }\n\t\t\t\t},\n\t\t\t\txaxis: {\n\t\t\t\t\ttickcolor: '#fff'\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar textfont = {\n\t\t\t\tfamily: 'Lato',\n\t\t\t\tcolor: 'white',\n\t\t\t\tsize: 14\n\t\t\t};\n\t\t\tif (dataChart.length > 0) {\n\t\t\t\tvar dataInc = treatDataForPieChart(dataChart);\n\t\t\t\tdataInc[0].textfont = textfont;\n\t\t\t\tPlotly.newPlot(destElString, dataInc, layout);\n\t\t\t} else {\n\t\t\t\tconsole.log('No data to show in chart.');\n\t\t\t}\n\t\t},\n\n\t\tgenerateBarCharts: function generateBarCharts(dataChart, destElString) {\n\t\t\tvar _layout;\n\n\t\t\tvar layout = (_layout = {\n\t\t\t\theight: 400,\n\t\t\t\twidth: 700,\n\t\t\t\tpaper_bgcolor: 'rgba(0,0,0,0)',\n\t\t\t\tplot_bgcolor: 'rgba(0,0,0,0)',\n\t\t\t\tlegend: {\n\t\t\t\t\tfont: { size: 14, color: 'white' }\n\t\t\t\t},\n\t\t\t\txaxis: {\n\t\t\t\t\ttickcolor: '#fff'\n\t\t\t\t},\n\t\t\t\tbarmode: 'stack'\n\t\t\t}, _defineProperty(_layout, 'xaxis', {\n\t\t\t\ttickfont: {\n\t\t\t\t\tsize: 14,\n\t\t\t\t\tcolor: 'rgb(107, 107, 107)'\n\t\t\t\t}\n\t\t\t}), _defineProperty(_layout, 'yaxis', {\n\t\t\t\ttitle: '$',\n\t\t\t\ttitlefont: {\n\t\t\t\t\tsize: 16,\n\t\t\t\t\tcolor: 'rgb(107, 107, 107)'\n\t\t\t\t},\n\t\t\t\ttickfont: {\n\t\t\t\t\tsize: 14,\n\t\t\t\t\tcolor: 'rgb(107, 107, 107)'\n\t\t\t\t}\n\t\t\t}), _layout);\n\t\t\t// var textfont = {\n\t\t\t// \tfamily: 'Lato',\n\t\t\t// \tcolor: 'white',\n\t\t\t// \tsize: 14\n\t\t\t// }\n\t\t\tif (dataChart.inc.length > 0 || dataChart.exp.length > 0) {\n\t\t\t\tvar dataTreated = treatDataForBarChart(dataChart);\n\t\t\t\t// dataTreated[0].textfont = textfont;\n\t\t\t\tPlotly.newPlot(destElString, dataTreated, layout);\n\t\t\t} else {\n\t\t\t\tconsole.log('No data to show in chart.');\n\t\t\t}\n\t\t},\n\n\t\tgenerateChart: function generateChart(dataAll, destElString) {\n\t\t\tif (destElString === DOMstrings.chartIncTab.slice(1)) {\n\t\t\t\tthis.generatePieCharts(dataAll.inc, DOMstrings.chartInc.slice(1));\n\t\t\t} else if (destElString === DOMstrings.chartExpTab.slice(1)) {\n\t\t\t\tthis.generatePieCharts(dataAll.exp, DOMstrings.chartExp.slice(1));\n\t\t\t} else if (destElString === DOMstrings.chartTimeTab.slice(1)) {\n\t\t\t\tvar infos = getTimedChartInfo();\n\t\t\t\tthis.generateBarCharts(dataAll, DOMstrings.chartTimed.slice(1), infos);\n\t\t\t}\n\t\t},\n\n\t\tgetLoadDateRange: function getLoadDateRange() {\n\t\t\tDOMElements.datePickerLoad.value;\n\t\t\tvar valIni = new Date(DOMElements.datePickerLoadIni[0].value).toISOString();\n\t\t\tvar valEnd = new Date(DOMElements.datePickerLoadEnd[0].value).toISOString();\n\t\t\treturn { initial: valIni, final: valEnd };\n\t\t},\n\n\n\t\tgetLoadInfo: function getLoadInfo() {\n\t\t\t// Find whith local type is active:\n\t\t\tvar loadInfo;\n\t\t\t// var elActiveContent = $(DOMstrings.loadTabCnt + ' div.active');\n\t\t\tvar activeCnt = getActiveTabContent(DOMstrings.loadTabCnt);\n\t\t\tif (activeCnt.id === DOMstrings.localStorageTabContent) {\n\t\t\t\tvar selectOpt = document.querySelector(DOMstrings.selectLocalStg);\n\t\t\t\tvar dataKey = selectOpt.options[selectOpt.selectedIndex].value;\n\t\t\t\tloadInfo = { key: dataKey, type: 'localStorage' };\n\t\t\t} else if (activeCnt.id === DOMstrings.calendarTabContent) {\n\t\t\t\tvar calSelected = DOMElements.selectCal[0].options[DOMElements.selectCal[0].selectedIndex].value;\n\t\t\t\tvar loadedRange = this.getLoadDateRange();\n\t\t\t\tloadInfo = { calendar: calSelected, type: 'GCalendar', dateRange: loadedRange };\n\t\t\t}\n\t\t\treturn loadInfo;\n\t\t},\n\n\t\tgetSaveDataInfo: function getSaveDataInfo() {\n\t\t\tvar saveInfo;\n\t\t\t// var elActiveContent = $(DOMstrings.tabSaveContent + ' div.active');\n\t\t\tvar activeCnt = getActiveTabContent(DOMstrings.tabSaveContent);\n\t\t\tif (activeCnt.id === DOMstrings.saveLocalStgTabCnt) {\n\t\t\t\tvar keySave = document.querySelector(DOMstrings.inputSaveKey).value;\n\t\t\t\tsaveInfo = { key: keySave, type: 'localStorage' };\n\t\t\t}\n\t\t\treturn saveInfo;\n\t\t},\n\n\t\thelperFillCalendarList: function helperFillCalendarList(isSignedIn, promiseCalList) {\n\t\t\tif (isSignedIn) {\n\t\t\t\tpromiseCalList.then(function (resp) {\n\t\t\t\t\tvar calIdSummary = resp.result.items.map(function (cur) {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: cur.id, summary: cur.summary\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t\tArray.from(DOMElements.selectCal[0].options).forEach(function (cur, idx) {\n\t\t\t\t\t\tif (idx != 0) {\n\t\t\t\t\t\t\tcur.remove();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tcalIdSummary.forEach(function (cur) {\n\t\t\t\t\t\tDOMElements.selectCal[0].options.add(new Option(cur.summary, cur.id));\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tArray.from(DOMElements.selectCal[0].options).forEach(function (cur, idx) {\n\t\t\t\t\tif (idx != 0) {\n\t\t\t\t\t\tcur.remove();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\talertButton: function alertButton(msg) {\n\t\t\t$(\".myAlert-bottom\").show();\n\t\t\t$(\".myAlert-bottom strong\").text(msg);\n\t\t\tsetTimeout(function () {\n\t\t\t\t$(\".myAlert-bottom\").hide();\n\t\t\t}, 2000);\n\t\t},\n\n\t\tonSignInChange: function onSignInChange(isSignedIn) {\n\t\t\t// helperFillCalendarList(isSignedIn);\n\t\t\tif (isSignedIn) {\n\t\t\t\tDOMElements.signoutGoogle.show();\n\t\t\t\tDOMElements.authGoogle.hide();\n\t\t\t} else {\n\t\t\t\tDOMElements.signoutGoogle.hide();\n\t\t\t\tDOMElements.authGoogle.show();\n\t\t\t}\n\t\t},\n\n\t\tinit: function init(params) {\n\t\t\tinitializeModule();\n\t\t}\n\t};\n}();\n\n// #####################################################\n// #####################################################\n// GOOGLE API\n// #####################################################\n// #####################################################\n\nvar googleAPIController = function () {\n\n\tvar CLIENT_ID = '292585574072-b8cv3s6m1eqt8iq403r7bl0huvtdaht2.apps.googleusercontent.com';\n\tvar API_KEY = 'AIzaSyCOEpOC7Tu4j4Xao67GhrLagnJfOAf9hmA';\n\tvar DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\n\tvar SCOPES = \"https://www.googleapis.com/auth/calendar.readonly\";\n\tvar authorizeButton = document.getElementById('authorize-button');\n\tvar signoutButton = document.getElementById('signout-button');\n\n\t// Interface Properties:\n\tvar actionAuthChange;\n\n\t// PAREI AQUI COLOCAR UMA ACTION QUANDO MUDAR AUTH (LOAD BUTTONS ETC)\n\n\t// function onSuccess(googleUser) {\n\t// \tconsole.log('Logged in as: ' + googleUser.getBasicProfile().getName());\n\t// }\n\t// function onFailure(error) {\n\t// \tconsole.log(error);\n\t// }\n\n\t// function handleClientLoad() {\n\t// \tgapi.load('client:auth2', this.initClient);\n\t// }\n\n\tfunction updateSigninStatus(isSignedIn) {\n\t\tif (isSignedIn) {\n\t\t\tauthorizeButton.style.display = 'none';\n\t\t\tsignoutButton.style.display = 'block';\n\t\t\tlistingToCalendarEvents();\n\t\t} else {\n\t\t\tauthorizeButton.style.display = 'block';\n\t\t\tsignoutButton.style.display = 'none';\n\t\t}\n\t}\n\n\tfunction fromYYYYMMDDtoMMDDYYYY(dateStr) {\n\t\tvar splt = dateStr.split('-');\n\t\treturn splt[1] + '-' + splt[2] + '-' + splt[0];\n\t}\n\n\tfunction calendarEventToData(events) {\n\t\tvar dataLoaded = { inc: [], exp: [] };\n\t\tevents.forEach(function (cur) {\n\t\t\tvar summary = cur.summary;\n\t\t\t// var when = !!cur.start.dateTime ? cur.start.dateTime : cur.start.date;\n\t\t\tvar when = fromYYYYMMDDtoMMDDYYYY(cur.start.date);\n\t\t\tvar splt = summary.split('$');\n\t\t\tvar description = splt.slice(0, splt.length - 1).join().trim();\n\t\t\tvar value = parseFloat(splt[splt.length - 1]);\n\t\t\tvar type = value >= 0.0 ? 'inc' : 'exp';\n\t\t\tdataLoaded[type].push({ description: description, value: value, date: when });\n\t\t});\n\t\treturn dataLoaded;\n\t}\n\n\tfunction obtainDataFromCalendar(loadInfo, actionWhenDataIsLoaded, actionWhenError) {\n\t\tvar dataLoaded;\n\t\t// if (!this.isSignedIn()) {\n\t\t// \treturn\n\t\t// }\n\t\tvar promise = gapi.client.calendar.events.list({\n\t\t\t'calendarId': loadInfo.calendar,\n\t\t\t// 'timeMin': (new Date()).toISOString(),\n\t\t\t'timeMin': loadInfo.dateRange.initial,\n\t\t\t'timeMax': loadInfo.dateRange.final,\n\t\t\t'showDeleted': false,\n\t\t\t'singleEvents': true,\n\t\t\t// 'maxResults': 10,\n\t\t\t'orderBy': 'startTime'\n\t\t});\n\t\t// return promise;\n\t\tpromise.then(function (response) {\n\t\t\tvar events = response.result.items;\n\t\t\tvar dataLoaded = calendarEventToData(events);\n\t\t\tactionWhenDataIsLoaded(dataLoaded);\n\t\t}).catch(function (err) {\n\t\t\tactionWhenError(err);\n\t\t\t// console.log(err);\n\t\t});\n\t}\n\n\tfunction handleAuthClick(event) {\n\t\tgapi.auth2.getAuthInstance().signIn();\n\t}\n\n\tfunction handleSignoutClick(event) {\n\t\tgapi.auth2.getAuthInstance().signOut();\n\t}\n\n\tfunction getListOfCalendarsPromise() {\n\t\tvar calIdSummary;\n\t\tvar p1 = gapi.client.calendar.calendarList.list({});\n\t\treturn p1;\n\t}\n\n\tfunction listingToCalendarEvents() {\n\t\t// gapi.client.calendar.events.list({\n\t\t// \t'calendarId': 'dsk4ugi0eesl9u3nosvmhetpn8@group.calendar.google.com',\n\t\t// \t'timeMin': (new Date()).toISOString(),\n\t\t// \t'showDeleted': false,\n\t\t// \t'singleEvents': true,\n\t\t// \t'maxResults': 10,\n\t\t// \t'orderBy': 'startTime'\n\t\t// }).then(function (response) {\n\t\t// \tvar events = response.result.items;\n\t\t// \tconsole.log('Upcoming events:');\n\n\t\t// \tif (events.length > 0) {\n\t\t// \t\tfor (i = 0; i < events.length; i++) {\n\t\t// \t\t\tvar event = events[i];\n\t\t// \t\t\tvar when = event.start.dateTime;\n\t\t// \t\t\tif (!when) {\n\t\t// \t\t\t\twhen = event.start.date;\n\t\t// \t\t\t}\n\t\t// \t\t\tconsole.log(event.summary + ' (' + when + ')')\n\t\t// \t\t}\n\t\t// \t} else {\n\t\t// \t\tconsole.log('No upcoming events found.');\n\t\t// \t}\n\t\t// });\n\t\tvar calIdSummary = getListOfCalendarsPromise();\n\t}\n\treturn {\n\n\t\tinit: function init(actionAuthChange_) {\n\t\t\tactionAuthChange = actionAuthChange_;\n\t\t\t// Hack to put in the global scope:\n\t\t\t// window.renderGoogleSignAPI = renderGoogleSignAPI;\n\t\t\t// initClient();\n\t\t\t// handleClientLoad();\n\t\t},\n\n\t\tinitClient: function initClient() {\n\t\t\tgapi.client.init({\n\t\t\t\tapiKey: API_KEY,\n\t\t\t\tclientId: CLIENT_ID,\n\t\t\t\tdiscoveryDocs: DISCOVERY_DOCS,\n\t\t\t\tscope: SCOPES\n\t\t\t}).then(function () {\n\t\t\t\t// Listen for sign-in state changes.\n\t\t\t\tgapi.auth2.getAuthInstance().isSignedIn.listen(actionAuthChange);\n\n\t\t\t\t// Handle the initial sign-in state.\n\t\t\t\tactionAuthChange(gapi.auth2.getAuthInstance().isSignedIn.get());\n\t\t\t\t// authorizeButton.onclick = handleAuthClick;\n\t\t\t\t// signoutButton.onclick = handleSignoutClick;\n\t\t\t});\n\t\t},\n\n\t\tsignOut: handleSignoutClick,\n\n\t\tsignIn: handleAuthClick,\n\n\t\tisSignedIn: function isSignedIn() {\n\t\t\treturn gapi.auth2.getAuthInstance().isSignedIn.get();\n\t\t},\n\n\t\tgetListOfCalendarsPromise: getListOfCalendarsPromise,\n\n\t\tobtainDataFromCalendar: obtainDataFromCalendar\n\t};\n}();\nfunction handleClientLoad() {\n\tgapi.load('client:auth2', googleAPIController.initClient);\n}\n\n// #####################################################\n// #####################################################\n// CONTROLLER\n// #####################################################\n// #####################################################\n\nvar controller = function (budgetCtrl, UICtrl, gApiCtrl) {\n\n\tvar DOMstrings, DOMElements;\n\tvar loadSettings;\n\n\tvar setupEventListeners = function setupEventListeners() {\n\t\tDOMstrings = UICtrl.getDOMStrings();\n\t\tDOMElements = UICtrl.getDOMElements();\n\n\t\tdocument.querySelector(DOMstrings.inputBtn).addEventListener('click', addValueButton);\n\t\tdocument.addEventListener('keypress', function (e) {\n\t\t\tif (e.keyCode === 13 || e.which === 13) {\n\t\t\t\taddValueButton();\n\t\t\t}\n\t\t});\n\n\t\tdocument.querySelector(DOMstrings.inputType).addEventListener('change', UICtrl.changedType);\n\n\t\t// Load events:\n\t\t$(DOMstrings.tabLoad).on('shown.bs.tab', activeLoadTab);\n\t\tdocument.querySelector(DOMstrings.okLoadBtn).addEventListener('click', clickLoadData);\n\n\t\tdocument.querySelector(DOMstrings.okSaveBtn).addEventListener('click', clickSaveData);\n\n\t\t$(DOMstrings.tabChart).on('shown.bs.tab', activeChartTab);\n\n\t\tDOMElements.removeTableRowBtnInc.on('click', clickRemoveTableRowBtnInc);\n\t\tDOMElements.removeTableRowBtnExp.on('click', clickRemoveTableRowBtnExp);\n\n\t\tDOMElements.authGoogle.on('click', gApiCtrl.signIn);\n\t\tDOMElements.signoutGoogle.on('click', gApiCtrl.signOut);\n\n\t\tDOMElements.loadImgLink.on('click', function (e) {\n\t\t\t// $(DOMElements.calendarTabContent).addClass('active');\n\t\t\t$('#nav-tab-load-cal').trigger('click');\n\n\t\t\tconsole.log('e', e);\n\t\t});\n\t\t// $('.img-cal').on('click', (e) => {\n\t\t// \tconsole.log('e', e);\n\t\t// });\n\t};\n\n\tvar clickRemoveTableRowBtnInc = function clickRemoveTableRowBtnInc(e) {\n\t\tvar ids = $.map(DOMElements.incTable.bootstrapTable('getSelections'), function (row) {\n\t\t\treturn row.id;\n\t\t});\n\t\tDOMElements.incTable.bootstrapTable('remove', {\n\t\t\tfield: 'id',\n\t\t\tvalues: ids\n\t\t});\n\n\t\t// Remove from data:\n\t\tids.forEach(function (id) {\n\t\t\tbudgetCtrl.deleteItem('inc', id);\n\t\t});\n\n\t\t// Update Total Budget:\n\t\tupdateBudget();\n\n\t\tUICtrl.alertButton('Item deleted.');\n\t};\n\n\tvar clickRemoveTableRowBtnExp = function clickRemoveTableRowBtnExp(e) {\n\t\tvar ids = $.map(DOMElements.expTable.bootstrapTable('getSelections'), function (row) {\n\t\t\treturn row.id;\n\t\t});\n\t\tDOMElements.expTable.bootstrapTable('remove', {\n\t\t\tfield: 'id',\n\t\t\tvalues: ids\n\t\t});\n\n\t\t// Remove from data:\n\t\tids.forEach(function (id) {\n\t\t\tbudgetCtrl.deleteItem('exp', id);\n\t\t});\n\n\t\t// Update Total Budget:\n\t\tupdateBudget();\n\n\t\tUICtrl.alertButton('Item deleted.');\n\t};\n\n\tvar validateAddValues = function validateAddValues(addedSettings) {\n\t\tvar isValid = true;\n\t\tvar description = addedSettings.description;\n\t\tif (description.trim() === '' || description === undefined || description === null) {\n\t\t\tisValid = false;\n\t\t}\n\t\tif (isNaN(addedSettings.value) || addedSettings.value <= 0) {\n\t\t\tisValid = false;\n\t\t}\n\t\treturn isValid;\n\t};\n\n\tvar updateBudget = function updateBudget() {\n\n\t\t// - Calculate the budget\n\t\tbudgetCtrl.calculateBudget();\n\n\t\t// - Return the budget\n\t\tvar budget = budgetCtrl.getBudget();\n\n\t\t// - Display the budget on the UI\n\t\tUIController.displayBudget(budget);\n\t};\n\n\tvar addItemProcedure = function addItemProcedure(addedSettings) {\n\t\t// - Validate the values\n\t\tif (!validateAddValues(addedSettings)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// - Add item to the budge controller\n\t\tvar newItem = budgetCtrl.addItem(addedSettings.type, addedSettings.description, addedSettings.value, addedSettings.date);\n\n\t\t// - Update the UI\n\t\tUICtrl.addListItem(newItem, addedSettings.type);\n\t\tUICtrl.clearFields();\n\n\t\t// - Calculate and update budget\n\t\tupdateBudget();\n\n\t\t// - Calculate percentages\n\t\tupdatePercentages();\n\t};\n\n\tvar addValueButton = function addValueButton() {\n\t\tvar newItem;\n\n\t\t// - Get the input data fields \n\t\tvar addedSettings = UICtrl.addValueSettings();\n\n\t\taddItemProcedure(addedSettings);\n\t};\n\n\tvar updatePercentages = function updatePercentages() {\n\t\t// Calc percentages\n\t\tbudgetCtrl.calculatePercentages();\n\n\t\t// Read Percentages from budget controller\n\t\tvar allPerc = budgetCtrl.getPercentages();\n\n\t\t// Update the UI with the percentages\n\t\tUICtrl.displayPercentages(allPerc);\n\t};\n\n\tvar ctrlDeleteItem = function ctrlDeleteItem(e) {\n\t\tvar itemID = e.target.parentNode.parentNode.parentNode.id;\n\t\tif (itemID) {\n\t\t\tvar splitID = itemID.split('-');\n\t\t\tvar type = splitID[0];\n\t\t\tvar ID = parseInt(splitID[1]);\n\n\t\t\t// - Delete item from the data structure\n\t\t\tbudgetCtrl.deleteItem(type, ID);\n\n\t\t\t// - Delete item from UI\n\t\t\tUICtrl.deleteListItem(itemID);\n\n\t\t\t// - Update and show new budget\n\t\t\tbudgetCtrl.calculateBudget();\n\t\t\tUICtrl.displayBudget(budgetCtrl.getBudget());\n\n\t\t\tupdatePercentages();\n\t\t}\n\t};\n\n\tvar retrieveLoadedDataCases = function retrieveLoadedDataCases(actionWhenDataIsLoaded, actionWhenError) {\n\t\t// var dataLoaded = { inc: [], exp: [] };\n\t\tvar loadInfo = UICtrl.getLoadInfo();\n\n\t\tif (loadInfo.type === 'localStorage') {\n\t\t\t// dataLoaded = JSON.parse(localStorage.getItem(loadInfo.key));\n\t\t\tbudgetCtrl.loadDataLocalStorage(loadInfo, actionWhenDataIsLoaded, actionWhenError);\n\t\t}\n\t\t// else if (loadInfo.type === 'test') {\n\t\t// \tdataLoaded = initBudgetData;\n\t\t// }\n\t\telse if (loadInfo.type === 'GCalendar') {\n\t\t\t\t// loadInfo: cal, dateRange\n\t\t\t\tgApiCtrl.obtainDataFromCalendar(loadInfo, actionWhenDataIsLoaded, actionWhenError);\n\t\t\t}\n\t};\n\n\tvar ctrlLoadBudgetData = function ctrlLoadBudgetData() {\n\t\tbudgetCtrl.ctrlLoadBudgetData();\n\t};\n\n\tvar loadDataAdjustUIFromObject = function loadDataAdjustUIFromObject(budgetData) {\n\n\t\t// Reset Internal Data\n\t\tbudgetCtrl.resetInternalData();\n\n\t\t// Reset Itens from UI:\n\t\tUICtrl.resetAllItems();\n\n\t\t// Show table\n\t\tDOMElements.incTable.show();\n\t\tDOMElements.expTable.show();\n\n\t\t// Get Data and Add\n\t\tvar auxItem = {\n\t\t\tdescription: '', value: 0.0, type: 'inc'\n\t\t};\n\t\tbudgetData.inc.forEach(function (cur) {\n\t\t\tauxItem.description = cur.description;\n\t\t\tauxItem.value = cur.value;\n\t\t\tauxItem.date = cur.date;\n\t\t\taddItemProcedure(auxItem);\n\t\t});\n\t\tauxItem.type = 'exp';\n\t\tbudgetData.exp.forEach(function (cur) {\n\t\t\tauxItem.description = cur.description;\n\t\t\tauxItem.value = Math.abs(cur.value);\n\t\t\taddItemProcedure(auxItem);\n\t\t});\n\t};\n\n\tvar actionWhenDataIsLoaded = function actionWhenDataIsLoaded(params) {\n\t\tvar budgetData = params;\n\n\t\tloadDataAdjustUIFromObject(budgetData);\n\n\t\t$(DOMstrings.loadModal).modal('hide');\n\t};\n\n\tvar actionWhenError = function actionWhenError(err) {\n\t\tconsole.log(err);\n\t\tUICtrl.alertButton('Error loading.');\n\t\t$(DOMstrings.loadModal).modal('hide');\n\t};\n\n\tvar clickLoadData = function clickLoadData(e) {\n\n\t\t// var budgetData = retrieveLoadedDataCases();\n\t\tif (gApiCtrl.isSignedIn()) {\n\t\t\tretrieveLoadedDataCases(actionWhenDataIsLoaded, actionWhenError);\n\t\t} else {\n\t\t\tUICtrl.alertButton('No data loaded.');\n\t\t\t$(DOMstrings.loadModal).modal('hide');\n\t\t}\n\t\t// loadDataAdjustUIFromObject(budgetData);\n\n\t\t// // Close Modal\n\t\t// $(DOMstrings.loadModal).modal('hide');\n\t};\n\n\t// var helperFillCalendarList = function () { //Should be in VIEWER LAYER!\n\t// \tgApiCtrl.getListOfCalendarsPromise().then(function (resp) {\n\t// \t\tvar calIdSummary = resp.result.items.map(function (cur) {\n\t// \t\t\treturn {\n\t// \t\t\t\tid: cur.id, summary: cur.summary\n\t// \t\t\t}\n\t// \t\t});\n\t// \t\tcalIdSummary.forEach(function (cur) {\n\t// \t\t\tDOMElements.selectCal[0].options.add(new Option(cur.summary, cur.id));\n\t// \t\t});\n\t// \t})\n\t// }\n\n\tvar activeLoadTab = function activeLoadTab(e) {\n\t\tvar selecEl;\n\t\tvar el = e.target;\n\t\tif (el.id === 'nav-tab-load-stg') {\n\t\t\tselecEl = document.querySelector(DOMstrings.selectLocalStg);\n\t\t\tvar localKeys = Object.keys(localStorage);\n\t\t\tvar lenOpts = selecEl.options.length;\n\t\t\tif (lenOpts > 1) {\n\t\t\t\tfor (var i = 1; i < lenOpts; i++) {\n\t\t\t\t\tselecEl.options.remove(1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlocalKeys.forEach(function (key) {\n\t\t\t\tselecEl.options.add(new Option(key, key));\n\t\t\t});\n\t\t} else if (el.id === 'nav-tab-load-cal') {\n\t\t\tif (gApiCtrl.isSignedIn()) {\n\t\t\t\tvar promiseCalList = gApiCtrl.getListOfCalendarsPromise();\n\t\t\t\tUICtrl.helperFillCalendarList(gApiCtrl.isSignedIn(), promiseCalList);\n\t\t\t}\n\t\t\t// if (gApiCtrl.isSignedIn()) {\n\t\t\t// Load all calendars  and create a select input\n\t\t\t// UICtrl.helperFillCalendarList(true, promiseCalList);\n\t\t\t// }\n\t\t}\n\t};\n\n\tvar saveDataLocalStorage = function saveDataLocalStorage(dataJson, saveInfo) {\n\t\tlocalStorage.setItem(saveInfo.key, dataJson);\n\t};\n\n\tvar saveData = function saveData(dataJson, saveInfo, callback) {\n\t\tcallback(dataJson, saveInfo);\n\t};\n\n\tvar clickSaveData = function clickSaveData() {\n\n\t\t// Adjust data budget a simpler representation:\n\t\tvar descripAndVals = budgetCtrl.data2SimpleScheme();\n\n\t\t// Transform to JSON\n\t\tvar jsonIncExp = JSON.stringify(descripAndVals);\n\n\t\tvar saveInfo = UICtrl.getSaveDataInfo();\n\n\t\tif (saveInfo.type === 'localStorage') {\n\t\t\tsaveData(jsonIncExp, saveInfo, saveDataLocalStorage);\n\t\t} else {\n\t\t\tconsole.log('saving error');\n\t\t}\n\n\t\t$(DOMstrings.saveModal).modal('hide');\n\t};\n\n\tvar clickShowCharts = function clickShowCharts() {\n\n\t\t// Show Charts\n\t\tvar eleChart = document.querySelector(DOMstrings.chartDiv);\n\t\tconsole.log(eleChart.style.display);\n\t\teleChart.style.display = eleChart.style.display === 'block' ? 'none' : 'block';\n\t\tconsole.log('after', eleChart.style.display);\n\t\t// parei aqui testar chart toggle\n\n\t\t// Auto-scroll to chart div\n\n\t\t// Get data from Budget Controller\n\t\tvar dataAllItems = budgetCtrl.getAllDataItems();\n\n\t\t// Plot Charts\n\t\tUICtrl.generateChart(dataAllItems);\n\t};\n\n\tvar activeChartTab = function activeChartTab(e) {\n\t\tvar dataToShow;\n\t\tvar el = e.target;\n\t\tvar dataAllItems = budgetCtrl.getAllDataItems();\n\n\t\tUICtrl.generateChart(dataAllItems, el.id);\n\n\t\t// if (el.id === DOMstrings.chartIncTab.slice(1)) {\n\t\t// \tdataToShow = dataAllItems.inc;\n\t\t// \tUICtrl.generateChart(dataToShow, DOMstrings.chartInc.slice(1));\n\t\t// } else if (el.id === DOMstrings.chartExpTab.slice(1)) {\n\t\t// \tdataToShow = dataAllItems.exp;\n\t\t// \tUICtrl.generateChart(dataToShow, DOMstrings.chartExp.slice(1));\n\t\t// } else if (el.id === DOMstrings.chartTimeTab.slice(1)) {\n\t\t// \tdataToShow = dataAllItems.exp;\n\t\t// \tUICtrl.generateChart(dataToShow, DOMstrings.chartTimed.slice(1));\n\t\t// }\n\t};\n\n\tfunction onSignInChange(isSignedIn) {\n\t\t// if (isSignedIn) {\n\t\t// \t// authorizeButton.style.display = 'none';\n\t\t// \t// signoutButton.style.display = 'block';\n\t\t// \t// listingToCalendarEvents();\n\n\t\t// } else {\n\t\t// \t// authorizeButton.style.display = 'block';\n\t\t// \t// signoutButton.style.display = 'none';\n\t\t// }\n\t\tUICtrl.onSignInChange(isSignedIn);\n\t\tvar promiseCalList = gApiCtrl.getListOfCalendarsPromise();\n\t\tUICtrl.helperFillCalendarList(isSignedIn, promiseCalList);\n\t}\n\n\treturn {\n\t\tinit: function init() {\n\t\t\tconsole.log('Application has started.');\n\t\t\tUICtrl.init();\n\t\t\tgApiCtrl.init(onSignInChange);\n\t\t\tUICtrl.displayMonth();\n\t\t\tUICtrl.displayBudget({\n\t\t\t\tbudget: 0,\n\t\t\t\tpercentage: 0,\n\t\t\t\ttotalInc: 0,\n\t\t\t\ttotalExp: 0\n\t\t\t});\n\t\t\tsetupEventListeners();\n\n\t\t\t// Ease debug:\n\t\t\tvar loadTestData = initBudgetData;\n\t\t\tloadDataAdjustUIFromObject(loadTestData);\n\t\t}\n\t};\n}(budgetController, UIController, googleAPIController);\n\ncontroller.init();\n\n// GOOGLE API TO CONNECT WITH CALENDAR\n\nfunction onSuccess(googleUser) {\n\tconsole.log('Logged in as: ' + googleUser.getBasicProfile().getName());\n}\nfunction onFailure(error) {\n\tconsole.log(error);\n}\n\nfunction renderButton() {\n\tgapi.signin2.render('my-signin2', {\n\t\t'scope': 'profile email',\n\t\t'width': 240,\n\t\t'height': 50,\n\t\t'longtitle': true,\n\t\t'theme': 'dark',\n\t\t'onsuccess': onSuccess,\n\t\t'onfailure': onFailure\n\t});\n}\nfunction listingToCalendarEvents() {\n\tgapi.client.calendar.events.list({\n\t\t'calendarId': 'dsk4ugi0eesl9u3nosvmhetpn8@group.calendar.google.com',\n\t\t'timeMin': new Date().toISOString(),\n\t\t'showDeleted': false,\n\t\t'singleEvents': true,\n\t\t'maxResults': 10,\n\t\t'orderBy': 'startTime'\n\t}).then(function (response) {\n\t\tvar events = response.result.items;\n\t\tappendPre('Upcoming events:');\n\n\t\tif (events.length > 0) {\n\t\t\tfor (i = 0; i < events.length; i++) {\n\t\t\t\tvar event = events[i];\n\t\t\t\tvar when = event.start.dateTime;\n\t\t\t\tif (!when) {\n\t\t\t\t\twhen = event.start.date;\n\t\t\t\t}\n\t\t\t\tappendPre(event.summary + ' (' + when + ')');\n\t\t\t}\n\t\t} else {\n\t\t\tappendPre('No upcoming events found.');\n\t\t}\n\t});\n}\n\n// API FIXING ERROR:\nwindow.onload = function (e) {\n\tthis.onload = function () {};handleClientLoad();\n};\nwindow.onreadystatechange = function (e) {\n\tif (this.readyState === 'complete') this.onload();\n};\n\n/* ------ BUGS -------------\r\n- After save > Back to Load Storage > Select is not rendering the localStorage keys\r\n*/\n\n/* --------- TODO ---------------\r\n- Date range selection for calendar budget loading\r\n- Enter on Load/ Save Modal to press OK\r\n- Close Date picker after chosen a date\r\n- Probably change the home page focus to the calendar ?\r\n*/\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n(function ($) {\n  \"use strict\"; // Start of use strict\n\n  // Smooth scrolling using jQuery easing\n\n  $('a.js-scroll-trigger[href*=\"#\"]:not([href=\"#\"])').click(function () {\n    if (location.pathname.replace(/^\\//, '') == this.pathname.replace(/^\\//, '') && location.hostname == this.hostname) {\n      var target = $(this.hash);\n      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');\n      if (target.length) {\n        $('html, body').animate({\n          scrollTop: target.offset().top - 48\n        }, 1000, \"easeInOutExpo\");\n        return false;\n      }\n    }\n  });\n\n  // Closes responsive menu when a scroll trigger link is clicked\n  $('.js-scroll-trigger').click(function () {\n    $('.navbar-collapse').collapse('hide');\n  });\n\n  // Activate scrollspy to add active class to navbar items on scroll\n  $('body').scrollspy({\n    target: '#mainNav',\n    offset: 54\n  });\n\n  // Collapse Navbar\n  var navbarCollapse = function navbarCollapse() {\n    if ($(\"#mainNav\").offset().top > 100) {\n      $(\"#mainNav\").addClass(\"navbar-shrink\");\n    } else {\n      $(\"#mainNav\").removeClass(\"navbar-shrink\");\n    }\n  };\n  // Collapse now if page is not at top\n  navbarCollapse();\n  // Collapse the navbar when page is scrolled\n  $(window).scroll(navbarCollapse);\n})(jQuery); // End of use strict\n\n// // Google Maps Scripts\n// var map = null;\n// // When the window has finished loading create our google map below\n// google.maps.event.addDomListener(window, 'load', init);\n// google.maps.event.addDomListener(window, 'resize', function() {\n//   map.setCenter(new google.maps.LatLng(40.6700, -73.9400));\n// });\n\n// function init() {\n//   // Basic options for a simple Google Map\n//   // For more options see: https://developers.google.com/maps/documentation/javascript/reference#MapOptions\n//   var mapOptions = {\n//     // How zoomed in you want the map to start at (always required)\n//     zoom: 15,\n\n//     // The latitude and longitude to center the map (always required)\n//     center: new google.maps.LatLng(40.6700, -73.9400), // New York\n\n//     // Disables the default Google Maps UI components\n//     disableDefaultUI: true,\n//     scrollwheel: false,\n//     draggable: false,\n\n//     // How you would like to style the map.\n//     // This is where you would paste any style found on Snazzy Maps.\n//     styles: [{\n//       \"featureType\": \"water\",\n//       \"elementType\": \"geometry\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 17\n//       }]\n//     }, {\n//       \"featureType\": \"landscape\",\n//       \"elementType\": \"geometry\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 20\n//       }]\n//     }, {\n//       \"featureType\": \"road.highway\",\n//       \"elementType\": \"geometry.fill\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 17\n//       }]\n//     }, {\n//       \"featureType\": \"road.highway\",\n//       \"elementType\": \"geometry.stroke\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 29\n//       }, {\n//         \"weight\": 0.2\n//       }]\n//     }, {\n//       \"featureType\": \"road.arterial\",\n//       \"elementType\": \"geometry\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 18\n//       }]\n//     }, {\n//       \"featureType\": \"road.local\",\n//       \"elementType\": \"geometry\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 16\n//       }]\n//     }, {\n//       \"featureType\": \"poi\",\n//       \"elementType\": \"geometry\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 21\n//       }]\n//     }, {\n//       \"elementType\": \"labels.text.stroke\",\n//       \"stylers\": [{\n//         \"visibility\": \"on\"\n//       }, {\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 16\n//       }]\n//     }, {\n//       \"elementType\": \"labels.text.fill\",\n//       \"stylers\": [{\n//         \"saturation\": 36\n//       }, {\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 40\n//       }]\n//     }, {\n//       \"elementType\": \"labels.icon\",\n//       \"stylers\": [{\n//         \"visibility\": \"off\"\n//       }]\n//     }, {\n//       \"featureType\": \"transit\",\n//       \"elementType\": \"geometry\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 19\n//       }]\n//     }, {\n//       \"featureType\": \"administrative\",\n//       \"elementType\": \"geometry.fill\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 20\n//       }]\n//     }, {\n//       \"featureType\": \"administrative\",\n//       \"elementType\": \"geometry.stroke\",\n//       \"stylers\": [{\n//         \"color\": \"#000000\"\n//       }, {\n//         \"lightness\": 17\n//       }, {\n//         \"weight\": 1.2\n//       }]\n//     }]\n//   };\n\n//   // Get the HTML DOM element that will contain your map\n//   // We are using a div with id=\"map\" seen below in the <body>\n//   var mapElement = document.getElementById('map');\n\n//   // Create the Google Map using out element and options defined above\n//   map = new google.maps.Map(mapElement, mapOptions);\n\n//   // Custom Map Marker Icon - Customize the map-marker.png file to customize your icon\n//   var image = 'img/map-marker.svg';\n//   var myLatLng = new google.maps.LatLng(40.6700, -73.9400);\n//   var beachMarker = new google.maps.Marker({\n//     position: myLatLng,\n//     map: map,\n//     icon: image\n//   });\n// }\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e0ab85b65c023ca6f896","// Imports:\r\nimport \"./grayscale.js\";\r\n\r\n\r\n// #####################################################\r\n// #####################################################\r\n// DUMMY DATA\r\n// #####################################################\r\n// #####################################################\r\n\r\nvar initBudgetData = {\r\n\tinc: [\r\n\t\t{ description: 'Web dev Butcher Project ', value: 500, date: '02-01-2018' },\r\n\t\t{ description: 'Backend Project for Spotify ', value: 2500, date: '02-03-2018' },\r\n\t\t{ description: 'Sold U2 ticket ', value: 500, date: '01-14-2018' },\r\n\t\t{ description: 'Salary ', value: 8000, date: '11-01-2017' },\r\n\t\t{ description: 'Freelance toptal VueJS for geolocation ', value: 1245.20, date: '12-01-2017' },\r\n\t],\r\n\texp: [\r\n\t\t{ description: 'Daycare', value: 2200, date: '02-01-2018' },\r\n\t\t{ description: 'Clothes', value: 200.21, date: '02-01-2018' },\r\n\t\t{ description: 'Bills', value: 625.00, date: '02-01-2018' },\r\n\t\t{ description: 'Friday 13 Happy hour', value: 125.70, date: '02-01-2018' }\r\n\t]\r\n}\r\n\r\n// #####################################################\r\n// #####################################################\r\n// MODEL\r\n// #####################################################\r\n// #####################################################\r\n\r\nvar budgetController = (function () {\r\n\r\n\tvar Expense = function (id, description, value, date) {\r\n\t\tthis.id = id;\r\n\t\tthis.description = description;\r\n\t\tthis.value = value;\r\n\t\tthis.percentage = -1;\r\n\t\tthis.date = date;\r\n\t};\r\n\r\n\tExpense.prototype.calcPercentages = function (totInc) {\r\n\t\tif (totInc > 0.0) {\r\n\t\t\tthis.percentage = Math.round(this.value / totInc * 100);\r\n\t\t} else {\r\n\t\t\tthis.percentage = -1;\r\n\t\t}\r\n\t};\r\n\r\n\tExpense.prototype.getPercentage = function () {\r\n\t\treturn this.percentage;\r\n\t}\r\n\r\n\tvar Income = function (id, description, value, date) {\r\n\t\tthis.id = id;\r\n\t\tthis.description = description;\r\n\t\tthis.value = value;\r\n\t\tthis.date = date;\r\n\t};\r\n\r\n\tvar data = {\r\n\t\tallItems: {\r\n\t\t\texp: [],\r\n\t\t\tinc: []\r\n\t\t},\r\n\t\ttotals: {\r\n\t\t\texp: 0,\r\n\t\t\tinc: 0\r\n\t\t},\r\n\t\tbudget: 0,\r\n\t\tpercentage: -1\r\n\t};\r\n\r\n\tvar initializeBudgetData = function () {\r\n\t\tdata = {\r\n\t\t\tallItems: {\r\n\t\t\t\texp: [],\r\n\t\t\t\tinc: []\r\n\t\t\t},\r\n\t\t\ttotals: {\r\n\t\t\t\texp: 0,\r\n\t\t\t\tinc: 0\r\n\t\t\t},\r\n\t\t\tbudget: 0,\r\n\t\t\tpercentage: -1\r\n\t\t};\r\n\t};\r\n\r\n\tvar calculateTotal = function (type) {\r\n\t\tvar sum = 0.0;\r\n\t\tdata.allItems[type].forEach(function (v) {\r\n\t\t\tsum += v.value;\r\n\t\t});\r\n\t\tdata.totals[type] = sum;\r\n\t};\r\n\r\n\treturn {\r\n\r\n\t\taddItem: function (type, desc, val, date) {\r\n\t\t\tvar newItem, ID;\r\n\r\n\t\t\tif (data.allItems[type].length > 0) {\r\n\t\t\t\tID = data.allItems[type][data.allItems[type].length - 1].id + 1;\r\n\t\t\t} else {\r\n\t\t\t\tID = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (type === 'exp') {\r\n\t\t\t\tnewItem = new Expense(ID, desc, val, date);\r\n\t\t\t} else if (type === 'inc') {\r\n\t\t\t\tnewItem = new Income(ID, desc, val, date);\r\n\t\t\t}\r\n\r\n\t\t\tdata.allItems[type].push(newItem);\r\n\t\t\treturn newItem;\r\n\t\t},\r\n\r\n\t\tdeleteItem: function (type, ID) {\r\n\t\t\tvar itemDelete = data.allItems[type].findIndex(function (el, i) {\r\n\t\t\t\treturn el.id === ID;\r\n\t\t\t});\r\n\t\t\tif (itemDelete !== null || itemDelete !== undefined) {\r\n\t\t\t\tdata.allItems[type].splice(itemDelete, 1);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcalculateBudget: function () {\r\n\t\t\t// Calculate total income and expenses\r\n\t\t\tcalculateTotal('inc');\r\n\t\t\tcalculateTotal('exp');\r\n\r\n\t\t\t// Calculate the budget: income - expenses\r\n\t\t\tdata.budget = data.totals['inc'] - data.totals['exp'];\r\n\r\n\t\t\t// Calculate the percentage of income that we spent\r\n\t\t\tif (data.totals.inc > 0.0) {\r\n\t\t\t\tdata.percentage = Math.round(data.totals.exp / data.totals.inc * 100.0);\r\n\t\t\t} else {\r\n\t\t\t\tdata.percentage = -1;\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tcalculatePercentages: function () {\r\n\t\t\tdata.allItems['exp'].forEach(function (cur) {\r\n\t\t\t\tcur.calcPercentages(data.totals.inc);\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetPercentages: function () {\r\n\t\t\tvar allPerc = data.allItems.exp.map(function (cur) {\r\n\t\t\t\treturn cur.getPercentage();\r\n\t\t\t});\r\n\t\t\treturn allPerc;\r\n\t\t},\r\n\r\n\t\tloadDataLocalStorage: function (loadInfo, actionWhenDataIsLoaded, actionWhenError) {\r\n\t\t\tvar dataLoaded;\r\n\t\t\ttry {\r\n\t\t\t\tvar dataLoaded = JSON.parse(localStorage.getItem(loadInfo.key));\r\n\t\t\t\tactionWhenDataIsLoaded(dataLoaded);\r\n\t\t\t} catch (error) {\r\n\t\t\t\tactionWhenError(error);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetBudget: function () {\r\n\t\t\treturn {\r\n\t\t\t\tbudget: data.budget,\r\n\t\t\t\tpercentage: data.percentage,\r\n\t\t\t\ttotalInc: data.totals.inc,\r\n\t\t\t\ttotalExp: data.totals.exp\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tresetInternalData: function () {\r\n\t\t\tinitializeBudgetData();\r\n\t\t},\r\n\t\tgetAllDataItems: function () {\r\n\t\t\treturn data.allItems;\r\n\t\t},\r\n\t\tdata2SimpleScheme: function () {\r\n\t\t\treturn data.allItems;\r\n\t\t},\r\n\t\ttesting: function () {\r\n\t\t\treturn data;\r\n\t\t}\r\n\t}\r\n})();\r\n\r\n// #####################################################\r\n// #####################################################\r\n// VIEW\r\n// #####################################################\r\n// #####################################################\r\n\r\nvar UIController = (function () {\r\n\r\n\tvar DOMstrings = {\r\n\t\tinputType: '.add__type',\r\n\t\tinputDescription: '.add__description',\r\n\t\tinputValue: '.add__value',\r\n\t\tinputBtn: '.add__btn',\r\n\t\tincomeContainer: '.income__list',\r\n\t\texpensesContainer: '.expenses__list',\r\n\t\tbudgetLabel: '.budget__value',\r\n\t\tincomeLabel: '.budget__income--value',\r\n\t\texpenseLabel: '.budget__expenses--value',\r\n\t\tpercentageLabel: '.budget__expenses--percentage',\r\n\t\tlistItems: '.list-items',\r\n\t\texpensesPercentages: '.item__percentage',\r\n\t\tdateLabel: '.budget__title--month',\r\n\t\tloadBtn: '.load__btn',\r\n\t\tsaveBtn: '.save__btn',\r\n\t\tchartDiv: '.charts',\r\n\t\titem: '.item',\r\n\t\tselectLocalStg: '#selectLocalStg',\r\n\t\ttabLoad: '.tab-load',\r\n\t\tokLoadBtn: '.ok-load-btn',\r\n\t\tloadTabCnt: '#tabLoadContent',\r\n\t\tlocalStorageTabContent: 'load-local-stg',\r\n\t\tfileSysTabContent: '#load-file-sys',\r\n\t\tloadModal: '#loadModal',\r\n\t\tinputSaveKey: '#inputSaveKey',\r\n\t\tokSaveBtn: '.ok-save-btn',\r\n\t\ttabSaveContent: '#tabSaveContent',\r\n\t\tsaveLocalStgTabCnt: 'save-local-stg',\r\n\t\ttabChart: '#tabChart',\r\n\t\tchartIncTab: '#chart-inc-tab',\r\n\t\tchartExpTab: '#chart-exp-tab',\r\n\t\tchartTimeTab: '#chart-time-tab',\r\n\t\tchartInc: '#chart-inc-content',\r\n\t\tchartTimed: '#chart-time-content',\r\n\t\tchartExp: '#chart-exp-content',\r\n\t\tsaveModal: '#saveModal',\r\n\t\tdatePicker: '#datepicker',\r\n\t\t// datePickerLoad: '.date-range-load',\r\n\t\tcalendarTabContent: 'load-google-cal',\r\n\t}\r\n\r\n\tvar DOMElements = {\r\n\t\tincTable: $('#inc-table'),\r\n\t\texpTable: $('#exp-table'),\r\n\t\tremoveTableRowBtnInc: $('#removeBtn-table-inc'),\r\n\t\tremoveTableRowBtnExp: $('#removeBtn-table-exp'),\r\n\t\tauthGoogle: $('.auth-google'),\r\n\t\tsignoutGoogle: $('.signout-google'),\r\n\t\tselectCal: $('#selectCal'),\r\n\t\tdatePickerLoad: $('.date-range-load input'),\r\n\t\tdatePickerLoadIni: $('#datePickerLoadIni'),\r\n\t\tdatePickerLoadEnd: $('#datePickerLoadEnd'),\r\n\t\tloadImgLink: $('.load-img-link'),\r\n\t\tcalendarTabContent: $('#load-google-cal'),\r\n\t};\r\n\r\n\tvar $addType = document.querySelector(DOMstrings.inputType);\r\n\tvar $addDescription = document.querySelector(DOMstrings.inputDescription);\r\n\tvar $addValue = document.querySelector(DOMstrings.inputValue);\r\n\tvar $addDate = document.querySelector(DOMstrings.datePicker);\r\n\r\n\tvar nodeListForEach = function (list, callback) {\r\n\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\tcallback(list[i], i);\r\n\t\t}\r\n\t};\r\n\r\n\tvar treatDataForPieChart = function (dataList) {\r\n\t\tconst labels = dataList.map(cur => cur.description);\r\n\t\tconst values = dataList.map(cur => cur.value);\r\n\t\treturn [{\r\n\t\t\ttype: 'pie',\r\n\t\t\tvalues: values,\r\n\t\t\tlabels: labels\r\n\t\t}];\r\n\t};\r\n\r\n\tvar getTimedChartInfo = function () {\r\n\t\treturn {};\r\n\t};\r\n\r\n\tvar treatDataForBarChart = function (dataList) {\r\n\t\tvar data = Array(2);\r\n\t\t['inc', 'exp'].forEach((cur, idx) => {\r\n\t\t\tvar labels = dataList[cur].map(it => it.date);\r\n\t\t\tvar values = dataList[cur].map(it => it.value);\r\n\t\t\tlet arrVals = [], arrLbls = [];\r\n\t\t\tlet remainLbls = labels.slice(), remainVals = values.slice();\r\n\t\t\tfor (let k = 0; k < labels.length; k++) {\r\n\t\t\t\tif (remainLbls.length === 0) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tlet flag = true;\r\n\t\t\t\tlet accm = 0.0;\r\n\t\t\t\twhile (flag) {\r\n\t\t\t\t\tconst idxOf = remainLbls.findIndex((el) => {\r\n\t\t\t\t\t\treturn el === labels[k] ? true : false;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (idxOf >= 0) {\r\n\t\t\t\t\t\taccm += remainVals[idxOf];\r\n\t\t\t\t\t\tremainLbls.splice(idxOf, 1);\r\n\t\t\t\t\t\tremainVals.splice(idxOf, 1);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tarrLbls.push(labels[k]);\r\n\t\t\t\t\t\tarrVals.push(accm);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar aux = {\r\n\t\t\t\tx: arrLbls,\r\n\t\t\t\ty: arrVals,\r\n\t\t\t\tname: cur,\r\n\t\t\t\ttype: 'bar',\r\n\t\t\t};\r\n\t\t\tdata[idx] = aux;\r\n\t\t});\r\n\t\treturn data; \r\n\t}\r\n\r\n\tvar formatNumber = function (num, tipo) {\r\n\t\tvar sign;\r\n\t\t// num = Math.abs(num);\r\n\t\t// num = num.toFixed(2);\r\n\t\t// var numSplit = num.split('.');\r\n\t\t// var int = numSplit[0];\r\n\t\t// var dec = numSplit[1];\r\n\t\t// if (int.length > 3) {\r\n\t\t// \tint = int.substr(0, int.length - 3) + ',' + int.substr(int.length - 3, 3);\r\n\t\t// };\r\n\t\t// const val = this.totalFormatter(num);\r\n\t\tconst val = num.toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,');\r\n\t\ttipo === 'exp' ? sign = '-' : sign = '+';\r\n\r\n\t\t// return sign + ' ' + int + '.' + dec;\r\n\t\treturn sign + ' ' + val;\r\n\t};\r\n\r\n\tfunction formattedNumberToFloat(numString) {\r\n\t\tvar splitted = numString.split(' ');\r\n\t\tvar sign = splitted[0].trim()[0];\r\n\t\tvar int_dec = splitted[1].split('.');\r\n\t\tvar val_int = parseFloat(int_dec[0].split(',').join(''));\r\n\t\tvar val_dec = parseFloat(int_dec[1]);\r\n\t\tvar val = val_int + val_dec / 100.0;\r\n\t\tvar val_final = sign === '+' ? val : -val;\r\n\t\treturn val_final;\r\n\t}\r\n\r\n\tvar getActiveTabContent = function (tabContentString) {\r\n\t\tvar elActiveContent = $(tabContentString + ' div.active');\r\n\t\tvar retEl = elActiveContent.length > 0 ? elActiveContent[0] : elActiveContent\r\n\t\treturn retEl\r\n\t};\r\n\r\n\tvar convertDate = function (inputFormat) {\r\n\t\tfunction pad(s) { return (s < 10) ? '0' + s : s; }\r\n\t\tvar d = new Date(inputFormat);\r\n\t\treturn [pad(d.getMonth() + 1), pad(d.getDate()), d.getFullYear()].join('-');\r\n\t};\r\n\r\n\tvar initializeDatePicker = function () {\r\n\t\tvar today = convertDate(Date.now());\r\n\t\tdocument.getElementById(DOMstrings.datePicker.slice(1)).value = today;\r\n\t\t$('#datepicker').datepicker({ autoclose: true});\r\n\t\t$('.date-range-load').each(function (cur) {\r\n\t\t\t$(this).datepicker('clearDates'); // 'clearDates'\r\n\t\t});\r\n\t\tDOMElements.datePickerLoad.each(function (cur) {\r\n\t\t\t$(this)[0].value = today;\r\n\t\t});\r\n\t};\r\n\r\n\r\n\tvar dateTableFormatter = function (value) {\r\n\t\treturn '<span style=\"font-size: 12px;\"><em>' + value + '</em></span>';\r\n\t};\r\n\r\n\tvar valueTableFormatter = function (value) {\r\n\t\treturn '<span style=\"font-size: 12px;\">' + value + '</span>';\r\n\t};\t\r\n\r\n\tvar dateSorter = function (before, after) {\r\n\t\tvar mm_dd_yyyy = before.split('-');\r\n\t\tvar mm = parseInt(mm_dd_yyyy[0]);\r\n\t\tvar dd = parseInt(mm_dd_yyyy[1]);\r\n\t\tvar yyyy = parseInt(mm_dd_yyyy[2]);\r\n\t\tvar mm_dd_yyyy = after.split('-');\r\n\t\tvar mmA = parseInt(mm_dd_yyyy[0]);\r\n\t\tvar ddA = parseInt(mm_dd_yyyy[1]);\r\n\t\tvar yyyyA = parseInt(mm_dd_yyyy[2]);\r\n\t\tif (yyyy < yyyyA) return -1;\r\n\t\tif (yyyy > yyyyA) return 1;\r\n\t\tif (mm < mmA) return -1;\r\n\t\tif (mm > mmA) return 1;\r\n\t\tif (dd < ddA) return -1;\r\n\t\tif (dd > ddA) return 1;\r\n\t\treturn 0;\r\n\t};\r\n\r\n\tvar valueSorter = function (before, after) {\r\n\t\tvar num_before = formattedNumberToFloat(before);\r\n\t\tvar num_after = formattedNumberToFloat(after);\r\n\t\tif (num_before < num_after) return -1;\r\n\t\tif (num_before > num_after) return 1;\r\n\t\treturn 0;\r\n\r\n\t}\r\n\r\n\tvar getColumnsTableSettings = function () {\r\n\t\tvar columns = [\r\n\t\t\t{\r\n\t\t\t\t\"field\": \"id\",\r\n\t\t\t\t\"title\": \"\",\r\n\t\t\t\t\"visible\": false\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"field\": \"state\",\r\n\t\t\t\t\"title\": \"\",\r\n\t\t\t\t\"checkbox\": true,\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"field\": \"date\",\r\n\t\t\t\t\"title\": \"Date\",\r\n\t\t\t\t\"align\": \"center\",\r\n\t\t\t\t\"class\": \"col-xs-4\",\r\n\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\"formatter\": dateTableFormatter,\r\n\t\t\t\t\"sorter\": dateSorter\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"field\": \"description\",\r\n\t\t\t\t\"title\": \"Description\",\r\n\t\t\t\t\"align\": \"center\",\r\n\t\t\t\t\"class\": \"col-xs-4\",\r\n\t\t\t\t\"sortable\": true\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t\"field\": \"value\",\r\n\t\t\t\t\"title\": \"Value\",\r\n\t\t\t\t\"align\": \"center\",\r\n\t\t\t\t\"class\": \"col-xs-4\",\r\n\t\t\t\t\"sortable\": true,\r\n\t\t\t\t\"sorter\": valueSorter,\r\n\t\t\t\t\"formatter\": valueTableFormatter\r\n\t\t\t}\r\n\t\t]\r\n\t\treturn columns;\r\n\t};\r\n\r\n\tvar initializeModule = function (params) {\r\n\t\tinitializeDatePicker();\r\n\t\tinitializeTables();\r\n\t};\r\n\r\n\tvar initializeTables = function () {\r\n\t\tDOMElements.incTable.hide();\r\n\t\tDOMElements.expTable.hide();\r\n\t\t// DOMElements.incTable.find('th[data-field=\"date\"]').\r\n\t\t// attr('data-formatter', 'dateTableFormatter');\r\n\t\tDOMElements.incTable.bootstrapTable({ data: [], columns: getColumnsTableSettings() });\r\n\t\tDOMElements.expTable.bootstrapTable({ data: [], columns: getColumnsTableSettings() });\r\n\t};\r\n\r\n\treturn {\r\n\t\taddValueSettings: function () {\r\n\t\t\tvar selectedType = $addType.options[$addType.selectedIndex].value;\r\n\t\t\treturn {\r\n\t\t\t\tvalue: parseFloat($addValue.value),\r\n\t\t\t\tdescription: $addDescription.value,\r\n\t\t\t\ttype: selectedType,\r\n\t\t\t\tdate: convertDate($addDate.value)\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddListItem: function (obj, type) {\r\n\t\t\tvar html, newHtml, element;\r\n\t\t\tvar $tableEl;\r\n\t\t\tif (type === 'inc') {\r\n\t\t\t\t$tableEl = DOMElements.incTable;\r\n\t\t\t} else if (type === 'exp') {\r\n\t\t\t\t$tableEl = DOMElements.expTable;\r\n\t\t\t}\r\n\r\n\t\t\t$tableEl.bootstrapTable('append', {\r\n\t\t\t\tid: obj.id,\r\n\t\t\t\tdescription: obj.description,\r\n\t\t\t\tvalue: formatNumber(obj.value, type),\r\n\t\t\t\tdate: obj.date\r\n\t\t\t});\r\n\r\n\t\t},\r\n\r\n\t\tgetDOMStrings: function () {\r\n\t\t\treturn DOMstrings\r\n\t\t},\r\n\r\n\t\tgetDOMElements: function () {\r\n\t\t\treturn DOMElements;\r\n\t\t},\r\n\r\n\t\tdeleteListItem: function (selectorID) {\r\n\t\t\tdocument.getElementById(selectorID).remove();\r\n\t\t\tthis.alertButton('Item deleted.');\r\n\t\t},\r\n\r\n\t\tclearFields: function () {\r\n\t\t\tvar fields, fieldsArray;\r\n\t\t\tfields = document.querySelectorAll(DOMstrings.inputDescription + ', ' + DOMstrings.inputValue);\r\n\r\n\t\t\tfieldsArray = Array.prototype.slice.call(fields);\r\n\r\n\t\t\tfieldsArray.forEach(function (cur, i, array) {\r\n\t\t\t\tcur.value = '';\r\n\t\t\t});\r\n\r\n\t\t\tfieldsArray[0].focus();\r\n\t\t},\r\n\r\n\t\tresetAllItems: function (params) { //BUG HERE USING OLDER ITEM\r\n\t\t\t// var allItemsElements = document.querySelectorAll(DOMstrings.item);\r\n\t\t\t// nodeListForEach(allItemsElements, function (cur, idx) {\r\n\t\t\t// \tcur.remove();\r\n\t\t\t// });\r\n\t\t\tDOMElements.incTable.bootstrapTable('removeAll');\r\n\t\t\tDOMElements.expTable.bootstrapTable('removeAll');\r\n\t\t},\r\n\r\n\t\tdisplayPercentages: function (percentages) {\r\n\t\t\tvar percEle = document.querySelectorAll(DOMstrings.expensesPercentages);\r\n\r\n\t\t\tnodeListForEach(percEle, function (cur, i) {\r\n\t\t\t\tcur.textContent = percentages[i] > 0.0 ? percentages[i] + '%' : '---';\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tdisplayBudget: function (obj) {\r\n\t\t\tvar typeAdd;\r\n\t\t\tobj.budget >= \"0\" ? typeAdd = 'inc' : typeAdd = 'exp';\r\n\t\t\tdocument.querySelector(DOMstrings.budgetLabel).textContent = formatNumber(obj.budget, typeAdd);\r\n\t\t\tdocument.querySelector(DOMstrings.incomeLabel).textContent = formatNumber(obj.totalInc, 'inc');\r\n\t\t\tdocument.querySelector(DOMstrings.expenseLabel).textContent = formatNumber(obj.totalExp, 'exp');\r\n\r\n\t\t\tif (obj.percentage >= 0.0) {\r\n\t\t\t\tdocument.querySelector(DOMstrings.percentageLabel).textContent = obj.percentage + '%';\r\n\t\t\t} else {\r\n\t\t\t\tdocument.querySelector(DOMstrings.percentageLabel).textContent = '--';\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tdisplayMonth: function () {\r\n\t\t\tvar now = new Date();\r\n\t\t\tvar monthNames = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\",\r\n\t\t\t\t\"July\", \"August\", \"September\", \"October\", \"November\", \"December\"\r\n\t\t\t];\r\n\t\t\tvar month = now.getMonth();\r\n\t\t\tvar year = now.getFullYear();\r\n\t\t\tdocument.querySelector(DOMstrings.dateLabel).textContent = monthNames[month] + '/' + year;\r\n\t\t},\r\n\r\n\t\tchangedType: function () {\r\n\t\t\tvar fields = document.querySelectorAll(\r\n\t\t\t\tDOMstrings.inputType + ',' +\r\n\t\t\t\tDOMstrings.inputDescription + ',' +\r\n\t\t\t\tDOMstrings.inputValue\r\n\t\t\t);\r\n\t\t\tnodeListForEach(fields, function (cur) {\r\n\t\t\t\tcur.classList.add('red-focus');\r\n\t\t\t});\r\n\t\t\tdocument.querySelector(DOMstrings.inputBtn).classList.toggle('red');\r\n\t\t},\r\n\r\n\t\tgeneratePieCharts: function (dataChart, destElString) {\r\n\t\t\tvar layout = {\r\n\t\t\t\theight: 400,\r\n\t\t\t\twidth: 700,\r\n\t\t\t\tpaper_bgcolor: 'rgba(0,0,0,0)',\r\n\t\t\t\tplot_bgcolor: 'rgba(0,0,0,0)',\r\n\t\t\t\tlegend: {\r\n\t\t\t\t\tfont: { size: 14, color: 'white' }\r\n\t\t\t\t},\r\n\t\t\t\txaxis: {\r\n\t\t\t\t\ttickcolor: '#fff'\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tvar textfont = {\r\n\t\t\t\tfamily: 'Lato',\r\n\t\t\t\tcolor: 'white',\r\n\t\t\t\tsize: 14\r\n\t\t\t}\r\n\t\t\tif (dataChart.length > 0) {\r\n\t\t\t\tvar dataInc = treatDataForPieChart(dataChart);\r\n\t\t\t\tdataInc[0].textfont = textfont;\r\n\t\t\t\tPlotly.newPlot(destElString, dataInc, layout);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('No data to show in chart.');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgenerateBarCharts: function (dataChart, destElString) {\r\n\t\t\tvar layout = {\r\n\t\t\t\theight: 400,\r\n\t\t\t\twidth: 700,\r\n\t\t\t\tpaper_bgcolor: 'rgba(0,0,0,0)',\r\n\t\t\t\tplot_bgcolor: 'rgba(0,0,0,0)',\r\n\t\t\t\tlegend: {\r\n\t\t\t\t\tfont: { size: 14, color: 'white' }\r\n\t\t\t\t},\r\n\t\t\t\txaxis: {\r\n\t\t\t\t\ttickcolor: '#fff'\r\n\t\t\t\t},\r\n\t\t\t\tbarmode: 'stack',\r\n\t\t\t\txaxis: {\r\n\t\t\t\t\ttickfont: {\r\n\t\t\t\t\t\tsize: 14,\r\n\t\t\t\t\t\tcolor: 'rgb(107, 107, 107)'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tyaxis: {\r\n\t\t\t\t\ttitle: '$',\r\n\t\t\t\t\ttitlefont: {\r\n\t\t\t\t\t\tsize: 16,\r\n\t\t\t\t\t\tcolor: 'rgb(107, 107, 107)'\r\n\t\t\t\t\t},\r\n\t\t\t\t\ttickfont: {\r\n\t\t\t\t\t\tsize: 14,\r\n\t\t\t\t\t\tcolor: 'rgb(107, 107, 107)'\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\t// var textfont = {\r\n\t\t\t// \tfamily: 'Lato',\r\n\t\t\t// \tcolor: 'white',\r\n\t\t\t// \tsize: 14\r\n\t\t\t// }\r\n\t\t\tif (dataChart.inc.length > 0 || dataChart.exp.length > 0) {\r\n\t\t\t\tvar dataTreated = treatDataForBarChart(dataChart);\r\n\t\t\t\t// dataTreated[0].textfont = textfont;\r\n\t\t\t\tPlotly.newPlot(destElString, dataTreated, layout);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('No data to show in chart.');\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgenerateChart: function (dataAll, destElString) {\r\n\t\t\tif (destElString === DOMstrings.chartIncTab.slice(1)) {\r\n\t\t\t\tthis.generatePieCharts(dataAll.inc, DOMstrings.chartInc.slice(1));\r\n\t\t\t} else if (destElString === DOMstrings.chartExpTab.slice(1)) {\r\n\t\t\t\tthis.generatePieCharts(dataAll.exp, DOMstrings.chartExp.slice(1));\r\n\t\t\t} else if (destElString === DOMstrings.chartTimeTab.slice(1)) {\r\n\t\t\t\tvar infos = getTimedChartInfo();\r\n\t\t\t\tthis.generateBarCharts(dataAll, DOMstrings.chartTimed.slice(1), infos);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tgetLoadDateRange () {\r\n\t\t\tDOMElements.datePickerLoad.value;\r\n\t\t\tconst valIni = (new Date(DOMElements.datePickerLoadIni[0].value)).toISOString();\r\n\t\t\tconst valEnd = (new Date(DOMElements.datePickerLoadEnd[0].value)).toISOString();\r\n\t\t\treturn {initial: valIni, final: valEnd}\r\n\t\t},\r\n\r\n\t\tgetLoadInfo: function () {\r\n\t\t\t// Find whith local type is active:\r\n\t\t\tvar loadInfo;\r\n\t\t\t// var elActiveContent = $(DOMstrings.loadTabCnt + ' div.active');\r\n\t\t\tvar activeCnt = getActiveTabContent(DOMstrings.loadTabCnt);\r\n\t\t\tif (activeCnt.id === DOMstrings.localStorageTabContent) {\r\n\t\t\t\tvar selectOpt = document.querySelector(DOMstrings.selectLocalStg);\r\n\t\t\t\tvar dataKey = selectOpt.options[selectOpt.selectedIndex].value;\r\n\t\t\t\tloadInfo = { key: dataKey, type: 'localStorage' };\r\n\t\t\t} else if (activeCnt.id === DOMstrings.calendarTabContent) {\r\n\t\t\t\tvar calSelected = DOMElements.selectCal[0].options[DOMElements.selectCal[0].selectedIndex].value;\r\n\t\t\t\tconst loadedRange = this.getLoadDateRange();\r\n\t\t\t\tloadInfo = { calendar: calSelected, type: 'GCalendar', dateRange: loadedRange };\r\n\t\t\t}\r\n\t\t\treturn loadInfo;\r\n\t\t},\r\n\r\n\t\tgetSaveDataInfo: function () {\r\n\t\t\tvar saveInfo;\r\n\t\t\t// var elActiveContent = $(DOMstrings.tabSaveContent + ' div.active');\r\n\t\t\tvar activeCnt = getActiveTabContent(DOMstrings.tabSaveContent);\r\n\t\t\tif (activeCnt.id === DOMstrings.saveLocalStgTabCnt) {\r\n\t\t\t\tvar keySave = document.querySelector(DOMstrings.inputSaveKey).value;\r\n\t\t\t\tsaveInfo = { key: keySave, type: 'localStorage' };\r\n\t\t\t}\r\n\t\t\treturn saveInfo;\r\n\t\t},\r\n\r\n\t\thelperFillCalendarList: function (isSignedIn, promiseCalList) {\r\n\t\t\tif (isSignedIn) {\r\n\t\t\t\tpromiseCalList.then(function (resp) {\r\n\t\t\t\t\tvar calIdSummary = resp.result.items.map(function (cur) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tid: cur.id, summary: cur.summary\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tArray.from(DOMElements.selectCal[0].options).forEach((cur, idx) => {\r\n\t\t\t\t\t\tif (idx != 0) {\r\n\t\t\t\t\t\t\tcur.remove();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tcalIdSummary.forEach(function (cur) {\r\n\t\t\t\t\t\tDOMElements.selectCal[0].options.add(new Option(cur.summary, cur.id));\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tArray.from(DOMElements.selectCal[0].options).forEach((cur, idx) => {\r\n\t\t\t\t\tif (idx != 0) {\r\n\t\t\t\t\t\tcur.remove();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\talertButton: function (msg) {\r\n\t\t\t$(\".myAlert-bottom\").show();\r\n\t\t\t$(\".myAlert-bottom strong\").text(msg);\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\t$(\".myAlert-bottom\").hide();\r\n\t\t\t}, 2000);\r\n\t\t},\r\n\r\n\t\tonSignInChange: function (isSignedIn) {\r\n\t\t\t// helperFillCalendarList(isSignedIn);\r\n\t\t\tif (isSignedIn) {\r\n\t\t\t\tDOMElements.signoutGoogle.show();\r\n\t\t\t\tDOMElements.authGoogle.hide();\r\n\t\t\t} else {\r\n\t\t\t\tDOMElements.signoutGoogle.hide();\r\n\t\t\t\tDOMElements.authGoogle.show();\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tinit: function (params) {\r\n\t\t\tinitializeModule();\r\n\t\t}\r\n\t}\r\n})();\r\n\r\n// #####################################################\r\n// #####################################################\r\n// GOOGLE API\r\n// #####################################################\r\n// #####################################################\r\n\r\nvar googleAPIController = (function () {\r\n\r\n\tvar CLIENT_ID = '292585574072-b8cv3s6m1eqt8iq403r7bl0huvtdaht2.apps.googleusercontent.com';\r\n\tvar API_KEY = 'AIzaSyCOEpOC7Tu4j4Xao67GhrLagnJfOAf9hmA';\r\n\tvar DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\r\n\tvar SCOPES = \"https://www.googleapis.com/auth/calendar.readonly\";\r\n\tvar authorizeButton = document.getElementById('authorize-button');\r\n\tvar signoutButton = document.getElementById('signout-button');\r\n\r\n\t// Interface Properties:\r\n\tvar actionAuthChange;\r\n\r\n\t// PAREI AQUI COLOCAR UMA ACTION QUANDO MUDAR AUTH (LOAD BUTTONS ETC)\r\n\r\n\t// function onSuccess(googleUser) {\r\n\t// \tconsole.log('Logged in as: ' + googleUser.getBasicProfile().getName());\r\n\t// }\r\n\t// function onFailure(error) {\r\n\t// \tconsole.log(error);\r\n\t// }\r\n\r\n\t// function handleClientLoad() {\r\n\t// \tgapi.load('client:auth2', this.initClient);\r\n\t// }\r\n\r\n\tfunction updateSigninStatus(isSignedIn) {\r\n\t\tif (isSignedIn) {\r\n\t\t\tauthorizeButton.style.display = 'none';\r\n\t\t\tsignoutButton.style.display = 'block';\r\n\t\t\tlistingToCalendarEvents();\r\n\t\t} else {\r\n\t\t\tauthorizeButton.style.display = 'block';\r\n\t\t\tsignoutButton.style.display = 'none';\r\n\t\t}\r\n\t}\r\n\r\n\tfunction fromYYYYMMDDtoMMDDYYYY(dateStr) {\r\n\t\tvar splt = dateStr.split('-');\r\n\t\treturn splt[1] + '-' + splt[2] + '-' + splt[0];\r\n\t}\r\n\r\n\tfunction calendarEventToData(events) {\r\n\t\tvar dataLoaded = { inc: [], exp: [] };\r\n\t\tevents.forEach(function (cur) {\r\n\t\t\tvar summary = cur.summary;\r\n\t\t\t// var when = !!cur.start.dateTime ? cur.start.dateTime : cur.start.date;\r\n\t\t\tvar when = fromYYYYMMDDtoMMDDYYYY(cur.start.date);\r\n\t\t\tvar splt = summary.split('$')\r\n\t\t\tvar description = splt.slice(0, splt.length - 1).join().trim();\r\n\t\t\tvar value = parseFloat(splt[splt.length - 1]);\r\n\t\t\tvar type = value >= 0.0 ? 'inc' : 'exp';\r\n\t\t\tdataLoaded[type].push({ description: description, value: value, date: when})\r\n\t\t});\r\n\t\treturn dataLoaded;\r\n\t}\r\n\r\n\tfunction obtainDataFromCalendar(loadInfo, actionWhenDataIsLoaded, actionWhenError) {\r\n\t\tvar dataLoaded;\r\n\t\t// if (!this.isSignedIn()) {\r\n\t\t// \treturn\r\n\t\t// }\r\n\t\tvar promise = gapi.client.calendar.events.list({\r\n\t\t\t'calendarId': loadInfo.calendar,\r\n\t\t\t// 'timeMin': (new Date()).toISOString(),\r\n\t\t\t'timeMin': loadInfo.dateRange.initial,\r\n\t\t\t'timeMax': loadInfo.dateRange.final,\r\n\t\t\t'showDeleted': false,\r\n\t\t\t'singleEvents': true,\r\n\t\t\t// 'maxResults': 10,\r\n\t\t\t'orderBy': 'startTime'\r\n\t\t})\r\n\t\t// return promise;\r\n\t\tpromise.then(function (response) {\r\n\t\t\tvar events = response.result.items;\r\n\t\t\tvar dataLoaded = calendarEventToData(events);\r\n\t\t\tactionWhenDataIsLoaded(dataLoaded);\r\n\t\t})\r\n\t\t.catch(function (err) {\r\n\t\t\tactionWhenError(err);\r\n\t\t\t// console.log(err);\r\n\t\t})\r\n\t}\r\n\r\n\tfunction handleAuthClick(event) {\r\n\t\tgapi.auth2.getAuthInstance().signIn();\r\n\t}\r\n\r\n\tfunction handleSignoutClick(event) {\r\n\t\tgapi.auth2.getAuthInstance().signOut();\r\n\t}\r\n\r\n\tfunction getListOfCalendarsPromise() {\r\n\t\tvar calIdSummary;\r\n\t\tvar p1 = gapi.client.calendar.calendarList.list({})\r\n\t\treturn p1;\r\n\t}\r\n\r\n\tfunction listingToCalendarEvents() {\r\n\t\t// gapi.client.calendar.events.list({\r\n\t\t// \t'calendarId': 'dsk4ugi0eesl9u3nosvmhetpn8@group.calendar.google.com',\r\n\t\t// \t'timeMin': (new Date()).toISOString(),\r\n\t\t// \t'showDeleted': false,\r\n\t\t// \t'singleEvents': true,\r\n\t\t// \t'maxResults': 10,\r\n\t\t// \t'orderBy': 'startTime'\r\n\t\t// }).then(function (response) {\r\n\t\t// \tvar events = response.result.items;\r\n\t\t// \tconsole.log('Upcoming events:');\r\n\r\n\t\t// \tif (events.length > 0) {\r\n\t\t// \t\tfor (i = 0; i < events.length; i++) {\r\n\t\t// \t\t\tvar event = events[i];\r\n\t\t// \t\t\tvar when = event.start.dateTime;\r\n\t\t// \t\t\tif (!when) {\r\n\t\t// \t\t\t\twhen = event.start.date;\r\n\t\t// \t\t\t}\r\n\t\t// \t\t\tconsole.log(event.summary + ' (' + when + ')')\r\n\t\t// \t\t}\r\n\t\t// \t} else {\r\n\t\t// \t\tconsole.log('No upcoming events found.');\r\n\t\t// \t}\r\n\t\t// });\r\n\t\tvar calIdSummary = getListOfCalendarsPromise();\r\n\t}\r\n\treturn {\r\n\r\n\t\tinit: function (actionAuthChange_) {\r\n\t\t\tactionAuthChange = actionAuthChange_;\r\n\t\t\t// Hack to put in the global scope:\r\n\t\t\t// window.renderGoogleSignAPI = renderGoogleSignAPI;\r\n\t\t\t// initClient();\r\n\t\t\t// handleClientLoad();\r\n\t\t},\r\n\r\n\t\tinitClient: function () {\r\n\t\t\tgapi.client.init({\r\n\t\t\t\tapiKey: API_KEY,\r\n\t\t\t\tclientId: CLIENT_ID,\r\n\t\t\t\tdiscoveryDocs: DISCOVERY_DOCS,\r\n\t\t\t\tscope: SCOPES\r\n\t\t\t}).then(function () {\r\n\t\t\t\t// Listen for sign-in state changes.\r\n\t\t\t\tgapi.auth2.getAuthInstance().isSignedIn.listen(actionAuthChange);\r\n\r\n\t\t\t\t// Handle the initial sign-in state.\r\n\t\t\t\tactionAuthChange(gapi.auth2.getAuthInstance().isSignedIn.get());\r\n\t\t\t\t// authorizeButton.onclick = handleAuthClick;\r\n\t\t\t\t// signoutButton.onclick = handleSignoutClick;\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\tsignOut: handleSignoutClick,\r\n\r\n\t\tsignIn: handleAuthClick,\r\n\r\n\t\tisSignedIn: function () {\r\n\t\t\treturn gapi.auth2.getAuthInstance().isSignedIn.get();\r\n\t\t},\r\n\r\n\t\tgetListOfCalendarsPromise: getListOfCalendarsPromise,\r\n\r\n\t\tobtainDataFromCalendar: obtainDataFromCalendar\r\n\t}\r\n})();\r\nfunction handleClientLoad() {\r\n\tgapi.load('client:auth2', googleAPIController.initClient);\r\n}\r\n\r\n// #####################################################\r\n// #####################################################\r\n// CONTROLLER\r\n// #####################################################\r\n// #####################################################\r\n\r\nvar controller = (function (budgetCtrl, UICtrl, gApiCtrl) {\r\n\r\n\tvar DOMstrings, DOMElements;\r\n\tvar loadSettings;\r\n\r\n\tvar setupEventListeners = function () {\r\n\t\tDOMstrings = UICtrl.getDOMStrings();\r\n\t\tDOMElements = UICtrl.getDOMElements();\r\n\r\n\t\tdocument.querySelector(DOMstrings.inputBtn).addEventListener('click', addValueButton);\r\n\t\tdocument.addEventListener('keypress', function (e) {\r\n\t\t\tif (e.keyCode === 13 || e.which === 13) {\r\n\t\t\t\taddValueButton();\r\n\t\t\t}\r\n\r\n\t\t});\r\n\r\n\t\tdocument.querySelector(DOMstrings.inputType).addEventListener('change', UICtrl.changedType)\r\n\r\n\t\t// Load events:\r\n\t\t$(DOMstrings.tabLoad).on('shown.bs.tab', activeLoadTab);\r\n\t\tdocument.querySelector(DOMstrings.okLoadBtn).addEventListener('click', clickLoadData);\r\n\r\n\t\tdocument.querySelector(DOMstrings.okSaveBtn).addEventListener('click', clickSaveData);\r\n\r\n\t\t$(DOMstrings.tabChart).on('shown.bs.tab', activeChartTab);\r\n\r\n\t\tDOMElements.removeTableRowBtnInc.on('click', clickRemoveTableRowBtnInc);\r\n\t\tDOMElements.removeTableRowBtnExp.on('click', clickRemoveTableRowBtnExp);\r\n\r\n\t\tDOMElements.authGoogle.on('click', gApiCtrl.signIn);\r\n\t\tDOMElements.signoutGoogle.on('click', gApiCtrl.signOut);\r\n\r\n\t\tDOMElements.loadImgLink.on('click', (e) => {\r\n\t\t\t// $(DOMElements.calendarTabContent).addClass('active');\r\n\t\t\t$('#nav-tab-load-cal').trigger('click');\r\n\t\t\t\r\n\t\t\tconsole.log('e', e);\r\n\t\t});\r\n\t\t// $('.img-cal').on('click', (e) => {\r\n\t\t// \tconsole.log('e', e);\r\n\t\t// });\r\n\r\n\t};\r\n\r\n\tvar clickRemoveTableRowBtnInc = function (e) {\r\n\t\tvar ids = $.map(DOMElements.incTable.bootstrapTable('getSelections'), function (row) {\r\n\t\t\treturn row.id;\r\n\t\t});\r\n\t\tDOMElements.incTable.bootstrapTable('remove', {\r\n\t\t\tfield: 'id',\r\n\t\t\tvalues: ids\r\n\t\t});\r\n\r\n\t\t// Remove from data:\r\n\t\tids.forEach(function (id) {\r\n\t\t\tbudgetCtrl.deleteItem('inc', id);\r\n\t\t});\r\n\r\n\t\t// Update Total Budget:\r\n\t\tupdateBudget();\r\n\r\n\t\tUICtrl.alertButton('Item deleted.');\r\n\t};\r\n\r\n\tvar clickRemoveTableRowBtnExp = function (e) {\r\n\t\tvar ids = $.map(DOMElements.expTable.bootstrapTable('getSelections'), function (row) {\r\n\t\t\treturn row.id;\r\n\t\t});\r\n\t\tDOMElements.expTable.bootstrapTable('remove', {\r\n\t\t\tfield: 'id',\r\n\t\t\tvalues: ids\r\n\t\t});\r\n\r\n\t\t// Remove from data:\r\n\t\tids.forEach(function (id) {\r\n\t\t\tbudgetCtrl.deleteItem('exp', id);\r\n\t\t});\r\n\r\n\t\t// Update Total Budget:\r\n\t\tupdateBudget();\r\n\r\n\t\tUICtrl.alertButton('Item deleted.');\r\n\t};\r\n\r\n\tvar validateAddValues = function (addedSettings) {\r\n\t\tvar isValid = true;\r\n\t\tvar description = addedSettings.description;\r\n\t\tif (description.trim() === '' || description === undefined || description === null) {\r\n\t\t\tisValid = false;\r\n\t\t}\r\n\t\tif (isNaN(addedSettings.value) || addedSettings.value <= 0) {\r\n\t\t\tisValid = false;\r\n\t\t}\r\n\t\treturn isValid;\r\n\t};\r\n\r\n\tvar updateBudget = function () {\r\n\r\n\t\t// - Calculate the budget\r\n\t\tbudgetCtrl.calculateBudget();\r\n\r\n\t\t// - Return the budget\r\n\t\tvar budget = budgetCtrl.getBudget();\r\n\r\n\t\t// - Display the budget on the UI\r\n\t\tUIController.displayBudget(budget);\r\n\t};\r\n\r\n\tvar addItemProcedure = function (addedSettings) {\r\n\t\t// - Validate the values\r\n\t\tif (!validateAddValues(addedSettings)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\t// - Add item to the budge controller\r\n\t\tconst newItem = budgetCtrl.addItem(addedSettings.type,\r\n\t\t\taddedSettings.description,\r\n\t\t\taddedSettings.value,\r\n\t\t\taddedSettings.date);\r\n\r\n\t\t// - Update the UI\r\n\t\tUICtrl.addListItem(newItem, addedSettings.type)\r\n\t\tUICtrl.clearFields();\r\n\r\n\t\t// - Calculate and update budget\r\n\t\tupdateBudget();\r\n\r\n\t\t// - Calculate percentages\r\n\t\tupdatePercentages();\r\n\t};\r\n\r\n\tvar addValueButton = function () {\r\n\t\tvar newItem;\r\n\r\n\t\t// - Get the input data fields \r\n\t\tvar addedSettings = UICtrl.addValueSettings();\r\n\r\n\t\taddItemProcedure(addedSettings);\r\n\t};\r\n\r\n\tvar updatePercentages = function () {\r\n\t\t// Calc percentages\r\n\t\tbudgetCtrl.calculatePercentages();\r\n\r\n\t\t// Read Percentages from budget controller\r\n\t\tvar allPerc = budgetCtrl.getPercentages();\r\n\r\n\t\t// Update the UI with the percentages\r\n\t\tUICtrl.displayPercentages(allPerc);\r\n\t};\r\n\r\n\tvar ctrlDeleteItem = function (e) {\r\n\t\tvar itemID = e.target.parentNode.parentNode.parentNode.id;\r\n\t\tif (itemID) {\r\n\t\t\tvar splitID = itemID.split('-');\r\n\t\t\tvar type = splitID[0];\r\n\t\t\tvar ID = parseInt(splitID[1]);\r\n\r\n\t\t\t// - Delete item from the data structure\r\n\t\t\tbudgetCtrl.deleteItem(type, ID);\r\n\r\n\t\t\t// - Delete item from UI\r\n\t\t\tUICtrl.deleteListItem(itemID);\r\n\r\n\t\t\t// - Update and show new budget\r\n\t\t\tbudgetCtrl.calculateBudget();\r\n\t\t\tUICtrl.displayBudget(budgetCtrl.getBudget());\r\n\r\n\t\t\tupdatePercentages();\r\n\t\t}\r\n\t};\r\n\r\n\tvar retrieveLoadedDataCases = function (actionWhenDataIsLoaded, actionWhenError) {\r\n\t\t// var dataLoaded = { inc: [], exp: [] };\r\n\t\tvar loadInfo = UICtrl.getLoadInfo();\r\n\r\n\t\tif (loadInfo.type === 'localStorage') {\r\n\t\t\t// dataLoaded = JSON.parse(localStorage.getItem(loadInfo.key));\r\n\t\t\tbudgetCtrl.loadDataLocalStorage(loadInfo, actionWhenDataIsLoaded, actionWhenError);\r\n\t\t}\r\n\t\t// else if (loadInfo.type === 'test') {\r\n\t\t// \tdataLoaded = initBudgetData;\r\n\t\t// }\r\n\t\telse if (loadInfo.type === 'GCalendar') { // loadInfo: cal, dateRange\r\n\t\t\tgApiCtrl.obtainDataFromCalendar(loadInfo, actionWhenDataIsLoaded, actionWhenError);\r\n\t\t}\r\n\t};\r\n\r\n\tvar ctrlLoadBudgetData = function () {\r\n\t\tbudgetCtrl.ctrlLoadBudgetData();\r\n\t}\r\n\r\n\tvar loadDataAdjustUIFromObject = function (budgetData) {\r\n\r\n\t\t// Reset Internal Data\r\n\t\tbudgetCtrl.resetInternalData();\r\n\r\n\t\t// Reset Itens from UI:\r\n\t\tUICtrl.resetAllItems();\r\n\r\n\t\t// Show table\r\n\t\tDOMElements.incTable.show();\r\n\t\tDOMElements.expTable.show();\r\n\r\n\t\t// Get Data and Add\r\n\t\tvar auxItem = {\r\n\t\t\tdescription: '', value: 0.0, type: 'inc'\r\n\t\t};\r\n\t\tbudgetData.inc.forEach(function (cur) {\r\n\t\t\tauxItem.description = cur.description;\r\n\t\t\tauxItem.value = cur.value;\r\n\t\t\tauxItem.date = cur.date;\r\n\t\t\taddItemProcedure(auxItem);\r\n\t\t});\r\n\t\tauxItem.type = 'exp';\r\n\t\tbudgetData.exp.forEach(function (cur) {\r\n\t\t\tauxItem.description = cur.description;\r\n\t\t\tauxItem.value = Math.abs(cur.value);\r\n\t\t\taddItemProcedure(auxItem);\r\n\t\t});\r\n\t}\r\n\r\n\tvar actionWhenDataIsLoaded = function (params) {\r\n\t\tvar budgetData = params;\r\n\r\n\t\tloadDataAdjustUIFromObject(budgetData);\r\n\r\n\t\t$(DOMstrings.loadModal).modal('hide');\r\n\t}\r\n\r\n\tvar actionWhenError = function (err) {\r\n\t\tconsole.log(err);\r\n\t\tUICtrl.alertButton('Error loading.');\r\n\t\t$(DOMstrings.loadModal).modal('hide');\r\n\t}\t\r\n\r\n\tvar clickLoadData = function (e) {\r\n\r\n\t\t// var budgetData = retrieveLoadedDataCases();\r\n\t\tif (gApiCtrl.isSignedIn()) {\r\n\t\t\tretrieveLoadedDataCases(actionWhenDataIsLoaded, actionWhenError);\r\n\t\t} else {\r\n\t\t\tUICtrl.alertButton('No data loaded.');\r\n\t\t\t$(DOMstrings.loadModal).modal('hide');\r\n\t\t}\r\n\t\t// loadDataAdjustUIFromObject(budgetData);\r\n\r\n\t\t// // Close Modal\r\n\t\t// $(DOMstrings.loadModal).modal('hide');\r\n\t};\r\n\r\n\t// var helperFillCalendarList = function () { //Should be in VIEWER LAYER!\r\n\t// \tgApiCtrl.getListOfCalendarsPromise().then(function (resp) {\r\n\t// \t\tvar calIdSummary = resp.result.items.map(function (cur) {\r\n\t// \t\t\treturn {\r\n\t// \t\t\t\tid: cur.id, summary: cur.summary\r\n\t// \t\t\t}\r\n\t// \t\t});\r\n\t// \t\tcalIdSummary.forEach(function (cur) {\r\n\t// \t\t\tDOMElements.selectCal[0].options.add(new Option(cur.summary, cur.id));\r\n\t// \t\t});\r\n\t// \t})\r\n\t// }\r\n\r\n\tvar activeLoadTab = function (e) {\r\n\t\tvar selecEl;\r\n\t\tvar el = e.target;\r\n\t\tif (el.id === 'nav-tab-load-stg') {\r\n\t\t\tselecEl = document.querySelector(DOMstrings.selectLocalStg);\r\n\t\t\tvar localKeys = Object.keys(localStorage);\r\n\t\t\tvar lenOpts = selecEl.options.length;\r\n\t\t\tif (lenOpts > 1) {\r\n\t\t\t\tfor (var i = 1; i < lenOpts; i++) {\r\n\t\t\t\t\tselecEl.options.remove(1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlocalKeys.forEach(function (key) {\r\n\t\t\t\tselecEl.options.add(new Option(key, key));\r\n\t\t\t});\r\n\t\t} else if (el.id === 'nav-tab-load-cal') {\r\n\t\t\tif (gApiCtrl.isSignedIn()) {\r\n\t\t\t\tvar promiseCalList = gApiCtrl.getListOfCalendarsPromise();\r\n\t\t\t\tUICtrl.helperFillCalendarList(gApiCtrl.isSignedIn(), promiseCalList);\r\n\t\t\t}\r\n\t\t\t// if (gApiCtrl.isSignedIn()) {\r\n\t\t\t\t// Load all calendars  and create a select input\r\n\t\t\t\t// UICtrl.helperFillCalendarList(true, promiseCalList);\r\n\t\t\t// }\r\n\t\t}\r\n\t}\r\n\r\n\tvar saveDataLocalStorage = function (dataJson, saveInfo) {\r\n\t\tlocalStorage.setItem(saveInfo.key, dataJson);\r\n\t}\r\n\r\n\tvar saveData = function (dataJson, saveInfo, callback) {\r\n\t\tcallback(dataJson, saveInfo);\r\n\t};\r\n\r\n\tvar clickSaveData = function () {\r\n\r\n\t\t// Adjust data budget a simpler representation:\r\n\t\tvar descripAndVals = budgetCtrl.data2SimpleScheme();\r\n\r\n\t\t// Transform to JSON\r\n\t\tvar jsonIncExp = JSON.stringify(descripAndVals);\r\n\r\n\t\tvar saveInfo = UICtrl.getSaveDataInfo();\r\n\r\n\t\tif (saveInfo.type === 'localStorage') {\r\n\t\t\tsaveData(jsonIncExp, saveInfo, saveDataLocalStorage);\r\n\t\t} else {\r\n\t\t\tconsole.log('saving error');\r\n\t\t}\r\n\r\n\t\t$(DOMstrings.saveModal).modal('hide');\r\n\t};\r\n\r\n\tvar clickShowCharts = function () {\r\n\r\n\t\t// Show Charts\r\n\t\tvar eleChart = document.querySelector(DOMstrings.chartDiv);\r\n\t\tconsole.log(eleChart.style.display);\r\n\t\teleChart.style.display = eleChart.style.display === 'block' ? 'none' : 'block';\r\n\t\tconsole.log('after', eleChart.style.display);\r\n\t\t// parei aqui testar chart toggle\r\n\r\n\t\t// Auto-scroll to chart div\r\n\r\n\t\t// Get data from Budget Controller\r\n\t\tvar dataAllItems = budgetCtrl.getAllDataItems();\r\n\r\n\t\t// Plot Charts\r\n\t\tUICtrl.generateChart(dataAllItems);\r\n\t};\r\n\r\n\tvar activeChartTab = function (e) {\r\n\t\tvar dataToShow;\r\n\t\tvar el = e.target;\r\n\t\tvar dataAllItems = budgetCtrl.getAllDataItems();\r\n\r\n\t\tUICtrl.generateChart(dataAllItems, el.id);\r\n\r\n\t\t// if (el.id === DOMstrings.chartIncTab.slice(1)) {\r\n\t\t// \tdataToShow = dataAllItems.inc;\r\n\t\t// \tUICtrl.generateChart(dataToShow, DOMstrings.chartInc.slice(1));\r\n\t\t// } else if (el.id === DOMstrings.chartExpTab.slice(1)) {\r\n\t\t// \tdataToShow = dataAllItems.exp;\r\n\t\t// \tUICtrl.generateChart(dataToShow, DOMstrings.chartExp.slice(1));\r\n\t\t// } else if (el.id === DOMstrings.chartTimeTab.slice(1)) {\r\n\t\t// \tdataToShow = dataAllItems.exp;\r\n\t\t// \tUICtrl.generateChart(dataToShow, DOMstrings.chartTimed.slice(1));\r\n\t\t// }\r\n\t}\r\n\r\n\tfunction onSignInChange(isSignedIn) {\r\n\t\t// if (isSignedIn) {\r\n\t\t// \t// authorizeButton.style.display = 'none';\r\n\t\t// \t// signoutButton.style.display = 'block';\r\n\t\t// \t// listingToCalendarEvents();\r\n\r\n\t\t// } else {\r\n\t\t// \t// authorizeButton.style.display = 'block';\r\n\t\t// \t// signoutButton.style.display = 'none';\r\n\t\t// }\r\n\t\tUICtrl.onSignInChange(isSignedIn);\r\n\t\tvar promiseCalList = gApiCtrl.getListOfCalendarsPromise();\r\n\t\tUICtrl.helperFillCalendarList(isSignedIn, promiseCalList);\r\n\t}\r\n\r\n\treturn {\r\n\t\tinit: function () {\r\n\t\t\tconsole.log('Application has started.');\r\n\t\t\tUICtrl.init();\r\n\t\t\tgApiCtrl.init(onSignInChange);\r\n\t\t\tUICtrl.displayMonth();\r\n\t\t\tUICtrl.displayBudget({\r\n\t\t\t\tbudget: 0,\r\n\t\t\t\tpercentage: 0,\r\n\t\t\t\ttotalInc: 0,\r\n\t\t\t\ttotalExp: 0\r\n\t\t\t});\r\n\t\t\tsetupEventListeners();\r\n\r\n\t\t\t// Ease debug:\r\n\t\t\tvar loadTestData = initBudgetData;\r\n\t\t\tloadDataAdjustUIFromObject(loadTestData);\r\n\t\t}\r\n\t}\r\n})(budgetController, UIController, googleAPIController);\r\n\r\ncontroller.init();\r\n\r\n// GOOGLE API TO CONNECT WITH CALENDAR\r\n\r\nfunction onSuccess(googleUser) {\r\n\tconsole.log('Logged in as: ' + googleUser.getBasicProfile().getName());\r\n}\r\nfunction onFailure(error) {\r\n\tconsole.log(error);\r\n}\r\n\r\nfunction renderButton() {\r\n\tgapi.signin2.render('my-signin2', {\r\n\t\t'scope': 'profile email',\r\n\t\t'width': 240,\r\n\t\t'height': 50,\r\n\t\t'longtitle': true,\r\n\t\t'theme': 'dark',\r\n\t\t'onsuccess': onSuccess,\r\n\t\t'onfailure': onFailure\r\n\t});\r\n}\r\nfunction listingToCalendarEvents() {\r\n\tgapi.client.calendar.events.list({\r\n\t\t'calendarId': 'dsk4ugi0eesl9u3nosvmhetpn8@group.calendar.google.com',\r\n\t\t'timeMin': (new Date()).toISOString(),\r\n\t\t'showDeleted': false,\r\n\t\t'singleEvents': true,\r\n\t\t'maxResults': 10,\r\n\t\t'orderBy': 'startTime'\r\n\t}).then(function (response) {\r\n\t\tvar events = response.result.items;\r\n\t\tappendPre('Upcoming events:');\r\n\r\n\t\tif (events.length > 0) {\r\n\t\t\tfor (i = 0; i < events.length; i++) {\r\n\t\t\t\tvar event = events[i];\r\n\t\t\t\tvar when = event.start.dateTime;\r\n\t\t\t\tif (!when) {\r\n\t\t\t\t\twhen = event.start.date;\r\n\t\t\t\t}\r\n\t\t\t\tappendPre(event.summary + ' (' + when + ')')\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tappendPre('No upcoming events found.');\r\n\t\t}\r\n\t});\r\n}\r\n\r\n// API FIXING ERROR:\r\nwindow.onload = function (e) {\r\n\tthis.onload = function () { }; handleClientLoad()\r\n}\r\nwindow.onreadystatechange = function (e) {\r\n\tif (this.readyState === 'complete') this.onload()\r\n}\r\n\r\n/* ------ BUGS -------------\r\n- After save > Back to Load Storage > Select is not rendering the localStorage keys\r\n*/\r\n\r\n/* --------- TODO ---------------\r\n- Date range selection for calendar budget loading\r\n- Enter on Load/ Save Modal to press OK\r\n- Close Date picker after chosen a date\r\n- Probably change the home page focus to the calendar ?\r\n*/\n\n\n// WEBPACK FOOTER //\n// ./js/app.js","(function($) {\r\n  \"use strict\"; // Start of use strict\r\n\r\n  // Smooth scrolling using jQuery easing\r\n  $('a.js-scroll-trigger[href*=\"#\"]:not([href=\"#\"])').click(function() {\r\n    if (location.pathname.replace(/^\\//, '') == this.pathname.replace(/^\\//, '') && location.hostname == this.hostname) {\r\n      var target = $(this.hash);\r\n      target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');\r\n      if (target.length) {\r\n        $('html, body').animate({\r\n          scrollTop: (target.offset().top - 48)\r\n        }, 1000, \"easeInOutExpo\");\r\n        return false;\r\n      }\r\n    }\r\n  });\r\n\r\n  // Closes responsive menu when a scroll trigger link is clicked\r\n  $('.js-scroll-trigger').click(function() {\r\n    $('.navbar-collapse').collapse('hide');\r\n  });\r\n\r\n  // Activate scrollspy to add active class to navbar items on scroll\r\n  $('body').scrollspy({\r\n    target: '#mainNav',\r\n    offset: 54\r\n  });\r\n\r\n  // Collapse Navbar\r\n  var navbarCollapse = function() {\r\n    if ($(\"#mainNav\").offset().top > 100) {\r\n      $(\"#mainNav\").addClass(\"navbar-shrink\");\r\n    } else {\r\n      $(\"#mainNav\").removeClass(\"navbar-shrink\");\r\n    }\r\n  };\r\n  // Collapse now if page is not at top\r\n  navbarCollapse();\r\n  // Collapse the navbar when page is scrolled\r\n  $(window).scroll(navbarCollapse);\r\n\r\n})(jQuery); // End of use strict\r\n\r\n// // Google Maps Scripts\r\n// var map = null;\r\n// // When the window has finished loading create our google map below\r\n// google.maps.event.addDomListener(window, 'load', init);\r\n// google.maps.event.addDomListener(window, 'resize', function() {\r\n//   map.setCenter(new google.maps.LatLng(40.6700, -73.9400));\r\n// });\r\n\r\n// function init() {\r\n//   // Basic options for a simple Google Map\r\n//   // For more options see: https://developers.google.com/maps/documentation/javascript/reference#MapOptions\r\n//   var mapOptions = {\r\n//     // How zoomed in you want the map to start at (always required)\r\n//     zoom: 15,\r\n\r\n//     // The latitude and longitude to center the map (always required)\r\n//     center: new google.maps.LatLng(40.6700, -73.9400), // New York\r\n\r\n//     // Disables the default Google Maps UI components\r\n//     disableDefaultUI: true,\r\n//     scrollwheel: false,\r\n//     draggable: false,\r\n\r\n//     // How you would like to style the map.\r\n//     // This is where you would paste any style found on Snazzy Maps.\r\n//     styles: [{\r\n//       \"featureType\": \"water\",\r\n//       \"elementType\": \"geometry\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 17\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"landscape\",\r\n//       \"elementType\": \"geometry\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 20\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"road.highway\",\r\n//       \"elementType\": \"geometry.fill\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 17\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"road.highway\",\r\n//       \"elementType\": \"geometry.stroke\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 29\r\n//       }, {\r\n//         \"weight\": 0.2\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"road.arterial\",\r\n//       \"elementType\": \"geometry\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 18\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"road.local\",\r\n//       \"elementType\": \"geometry\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 16\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"poi\",\r\n//       \"elementType\": \"geometry\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 21\r\n//       }]\r\n//     }, {\r\n//       \"elementType\": \"labels.text.stroke\",\r\n//       \"stylers\": [{\r\n//         \"visibility\": \"on\"\r\n//       }, {\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 16\r\n//       }]\r\n//     }, {\r\n//       \"elementType\": \"labels.text.fill\",\r\n//       \"stylers\": [{\r\n//         \"saturation\": 36\r\n//       }, {\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 40\r\n//       }]\r\n//     }, {\r\n//       \"elementType\": \"labels.icon\",\r\n//       \"stylers\": [{\r\n//         \"visibility\": \"off\"\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"transit\",\r\n//       \"elementType\": \"geometry\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 19\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"administrative\",\r\n//       \"elementType\": \"geometry.fill\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 20\r\n//       }]\r\n//     }, {\r\n//       \"featureType\": \"administrative\",\r\n//       \"elementType\": \"geometry.stroke\",\r\n//       \"stylers\": [{\r\n//         \"color\": \"#000000\"\r\n//       }, {\r\n//         \"lightness\": 17\r\n//       }, {\r\n//         \"weight\": 1.2\r\n//       }]\r\n//     }]\r\n//   };\r\n\r\n//   // Get the HTML DOM element that will contain your map\r\n//   // We are using a div with id=\"map\" seen below in the <body>\r\n//   var mapElement = document.getElementById('map');\r\n\r\n//   // Create the Google Map using out element and options defined above\r\n//   map = new google.maps.Map(mapElement, mapOptions);\r\n\r\n//   // Custom Map Marker Icon - Customize the map-marker.png file to customize your icon\r\n//   var image = 'img/map-marker.svg';\r\n//   var myLatLng = new google.maps.LatLng(40.6700, -73.9400);\r\n//   var beachMarker = new google.maps.Marker({\r\n//     position: myLatLng,\r\n//     map: map,\r\n//     icon: image\r\n//   });\r\n// }\r\n\n\n\n// WEBPACK FOOTER //\n// ./js/grayscale.js"],"sourceRoot":""}